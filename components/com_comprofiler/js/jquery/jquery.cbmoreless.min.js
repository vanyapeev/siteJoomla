(function(e){var s=[];var t={init:function(t){return this.each(function(){var i=this;var l=e(i).data("cbmoreless");if(l){return}l={};l.options=typeof t!="undefined"?t:{};l.defaults=e.fn.cbmoreless.defaults;l.settings=e.extend(true,{},l.defaults,l.options);l.element=e(i);if(l.settings.useData){e.each(l.defaults,function(e,s){if(e!="init"&&e!="useData"){var t=l.element.data("cbmoreless"+e.charAt(0).toUpperCase()+e.slice(1));if(typeof t!="undefined"){l.settings[e]=t}else{t=l.element.data("cbmoreless"+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());if(typeof t!="undefined"){l.settings[e]=t}}}})}l.element.triggerHandler("cbmoreless.init.before",[l]);if(!l.settings.init){return}if(!l.settings.height){l.settings.height=100}if(l.element.children(".cbMoreLessOpen.fade-edge,.cbMoreLessClose.fade-edge").length){var o=null;l.element.parents().each(function(){var s=e(this).css("background-color");if(s&&(s!=""&&s!="transparent"&&s!="rgba(0, 0, 0, 0)")){o=s;return false}});if(o){l.element.children(".cbMoreLessOpen.fade-edge,.cbMoreLessClose.fade-edge").css("background-image","linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, "+o+" 100%)");l.element.children(".cbMoreLessOpen,.cbMoreLessClose").find(".cbMoreLessButton").css("background-color",o)}}l.openHandler=function(e){e.preventDefault();n.call(i,l)};l.closeHandler=function(e){e.preventDefault();r.call(i,l)};l.element.children(".cbMoreLessOpen").on("click",l.openHandler);l.element.children(".cbMoreLessClose").on("click",l.closeHandler);if(!l.element.hasClass("cbMoreLessOpened")){l.element.removeClass("cbMoreLessClosed");l.element.children(".cbMoreLessOpen,.cbMoreLessClose").addClass("hidden");var c=l.element.children(".cbMoreLessContent");l.height=c.height();if(l.settings.height){c.css("max-height",l.settings.height);c.css("height",l.settings.height)}if(typeof c.get(0)!="undefined"){var d=c.height();var a=c.prop("scrollHeight");if(c.is(":hidden")&&a==0){var h=c.parents(":hidden");h.each(function(){e(this).addClass("cbForceDisplay")});d=c.height();a=c.prop("scrollHeight");h.each(function(){e(this).removeClass("cbForceDisplay")})}l.height=a;if(d<a){r.call(this,l)}else{n.call(this,l)}}else{n.call(this,l)}if(l.settings.height){c.css("height","")}}l.element.on("remove destroy.cbmoreless",function(){l.element.cbmoreless("destroy")});l.element.on("rebind.cbmoreless",function(){l.element.cbmoreless("rebind")});l.element.on("modified.cbmoreless",function(e,s,t,n){if(s!=t){l.element.cbmoreless("rebind")}});l.element.on("cloned.cbmoreless",function(){if(l.settings.height){e(this).children(".cbMoreLessContent").css("max-height","none")}e(this).off("destroy.cbmoreless");e(this).off("rebind.cbmoreless");e(this).off("modified.cbmoreless");e(this).off("cloned.cbmoreless");e(this).children(".cbMoreLessOpen").off("click",l.openHandler).addClass("hidden");e(this).children(".cbMoreLessClose").off("click",l.closeHandler).addClass("hidden");e(this).removeClass("cbMoreLessOpened cbMoreLessClosed");e(this).removeData("cbmoreless");e(this).cbmoreless(l.options)});l.element.triggerHandler("cbmoreless.init.after",[l]);l.element.data("cbmoreless",l);s.push(l)})},open:function(){var s=e(this).data("cbmoreless");if(!s){return this}n.call(this,s);return this},close:function(){var s=e(this).data("cbmoreless");if(!s){return this}r.call(this,s);return this},rebind:function(){var s=e(this).data("cbmoreless");if(!s){return this}s.element.cbmoreless("destroy");s.element.cbmoreless(s.options);return this},destroy:function(){var s=e(this).data("cbmoreless");if(!s){return this}if(s.settings.height){s.element.children(".cbMoreLessContent").css("max-height","none")}s.element.off("destroy.cbmoreless");s.element.off("rebind.cbmoreless");s.element.off("modified.cbmoreless");s.element.off("cloned.cbmoreless");s.element.children(".cbMoreLessOpen").off("click",s.openHandler).addClass("hidden");s.element.children(".cbMoreLessClose").off("click",s.closeHandler).addClass("hidden");s.element.removeClass("cbMoreLessOpened cbMoreLessClosed");s.element.removeData("cbmoreless");s.element.triggerHandler("cbmoreless.destroyed",[s]);return this},instances:function(){return s}};function n(e){if(e.settings.height){var s="none";if(e.settings.stepped){s="+="+e.settings.height+"px"}e.element.children(".cbMoreLessContent").css("max-height",s)}if(e.settings.stepped){var t=e.element.children(".cbMoreLessContent").height();if(t>=e.height){e.element.removeClass("cbMoreLessClosed cbMoreLessStepped").addClass("cbMoreLessOpened");e.element.children(".cbMoreLessOpen").addClass("hidden");e.element.children(".cbMoreLessClose").removeClass("hidden")}else if(t<=e.height){e.element.removeClass("cbMoreLessOpened cbMoreLessClosed").addClass("cbMoreLessStepped");e.element.children(".cbMoreLessClose").removeClass("hidden")}}else{e.element.removeClass("cbMoreLessClosed").addClass("cbMoreLessOpened");e.element.children(".cbMoreLessOpen").addClass("hidden");e.element.children(".cbMoreLessClose").removeClass("hidden")}}function r(e){if(e.settings.height){var s=e.settings.height;if(e.settings.stepped&&e.element.children(".cbMoreLessContent").height()>e.settings.height){s="-="+e.settings.height+"px"}e.element.children(".cbMoreLessContent").css("max-height",s)}if(e.settings.stepped){var t=e.element.children(".cbMoreLessContent").height();if(t<=e.settings.height){e.element.removeClass("cbMoreLessOpened cbMoreLessStepped").addClass("cbMoreLessClosed");e.element.children(".cbMoreLessOpen").removeClass("hidden");e.element.children(".cbMoreLessClose").addClass("hidden")}else if(t<=e.height){e.element.removeClass("cbMoreLessOpened cbMoreLessClosed").addClass("cbMoreLessStepped");e.element.children(".cbMoreLessOpen").removeClass("hidden")}}else{e.element.removeClass("cbMoreLessOpened").addClass("cbMoreLessClosed");e.element.children(".cbMoreLessOpen").removeClass("hidden");e.element.children(".cbMoreLessClose").addClass("hidden")}}e.fn.cbmoreless=function(e){if(t[e]){return t[e].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof e==="object"||!e){return t.init.apply(this,arguments)}return this};e.fn.cbmoreless.defaults={init:true,useData:true,stepped:false,height:100}})(jQuery);