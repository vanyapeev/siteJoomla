"use strict";(function(e,t){if(typeof exports==="object"){module.exports=t()}else if(typeof define==="function"&&define.amd){define(["jquery","googlemaps!"],t)}else{e.GMaps=t()}})(this,function(){var t=function(e,t){var o;if(e===t){return e}for(o in t){if(t[o]!==undefined){e[o]=t[o]}}return e};var o=function(e,t){var o;if(e===t){return e}for(o in t){if(e[o]!=undefined){e[o]=t[o]}}return e};var n=function(e,t){var o=Array.prototype.slice.call(arguments,2),n=[],i=e.length,r;if(Array.prototype.map&&e.map===Array.prototype.map){n=Array.prototype.map.call(e,function(e){var n=o.slice(0);n.splice(0,0,e);return t.apply(this,n)})}else{for(r=0;r<i;r++){callback_params=o;callback_params.splice(0,0,e[r]);n.push(t.apply(this,callback_params))}}return n};var i=function(e){var t=[],o;for(o=0;o<e.length;o++){t=t.concat(e[o])}return t};var r=function(e,t){var o=e[0],n=e[1];if(t){o=e[1];n=e[0]}return new google.maps.LatLng(o,n)};var s=function(e,t){var o;for(o=0;o<e.length;o++){if(!(e[o]instanceof google.maps.LatLng)){if(e[o].length>0&&typeof e[o][0]==="object"){e[o]=s(e[o],t)}else{e[o]=r(e[o],t)}}}return e};var a=function(e,t){var o,n=e.replace(".","");if("jQuery"in this&&t){o=$("."+n,t)[0]}else{o=document.getElementsByClassName(n)[0]}return o};var l=function(e,t){var o,e=e.replace("#","");if("jQuery"in window&&t){o=$("#"+e,t)[0]}else{o=document.getElementById(e)}return o};var p=function(e){var t=0,o=0;if(e.offsetParent){do{t+=e.offsetLeft;o+=e.offsetTop}while(e=e.offsetParent)}return[t,o]};var c=function(e){"use strict";var o=document;var n=function(e){if(!(typeof window.google==="object"&&window.google.maps)){if(typeof window.console==="object"&&window.console.error){console.error("Google Maps API is required. Please register the following JavaScript library https://maps.googleapis.com/maps/api/js.")}return function(){}}if(!this)return new n(e);e.zoom=e.zoom||15;e.mapType=e.mapType||"roadmap";var i=function(e,t){return e===undefined?t:e};var r=this,s,c=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","idle","maptypeid_changed","projection_changed","resize","tilesloaded","zoom_changed"],g=["mousemove","mouseout","mouseover"],f=["el","lat","lng","mapType","width","height","markerClusterer","enableNewStyle"],h=e.el||e.div,u=e.markerClusterer,d=google.maps.MapTypeId[e.mapType.toUpperCase()],m=new google.maps.LatLng(e.lat,e.lng),y=i(e.zoomControl,true),v=e.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"},k=v.style||"DEFAULT",w=v.position||"TOP_LEFT",L=i(e.panControl,true),b=i(e.mapTypeControl,true),_=i(e.scaleControl,true),M=i(e.streetViewControl,true),x=i(x,true),C={},O={zoom:this.zoom,center:m,mapTypeId:d},P={panControl:L,zoomControl:y,zoomControlOptions:{style:google.maps.ZoomControlStyle[k],position:google.maps.ControlPosition[w]},mapTypeControl:b,scaleControl:_,streetViewControl:M,overviewMapControl:x};if(typeof e.el==="string"||typeof e.div==="string"){if(h.indexOf("#")>-1){this.el=l(h,e.context)}else{this.el=a.apply(this,[h,e.context])}}else{this.el=h}if(typeof this.el==="undefined"||this.el===null){throw"No element defined."}window.context_menu=window.context_menu||{};window.context_menu[r.el.id]={};this.controls=[];this.overlays=[];this.layers=[];this.singleLayers={};this.markers=[];this.polylines=[];this.routes=[];this.polygons=[];this.infoWindow=null;this.overlay_el=null;this.zoom=e.zoom;this.registered_events={};this.el.style.width=e.width||this.el.scrollWidth||this.el.offsetWidth;this.el.style.height=e.height||this.el.scrollHeight||this.el.offsetHeight;google.maps.visualRefresh=e.enableNewStyle;for(s=0;s<f.length;s++){delete e[f[s]]}if(e.disableDefaultUI!=true){O=t(O,P)}C=t(O,e);for(s=0;s<c.length;s++){delete C[c[s]]}for(s=0;s<g.length;s++){delete C[g[s]]}this.map=new google.maps.Map(this.el,C);if(u){this.markerClusterer=u.apply(this,[this.map])}var T=function(e,t){var o="",n=window.context_menu[r.el.id][e];for(var i in n){if(n.hasOwnProperty(i)){var s=n[i];o+='<li><a id="'+e+"_"+i+'" href="#">'+s.title+"</a></li>"}}if(!l("gmaps_context_menu"))return;var a=l("gmaps_context_menu");a.innerHTML=o;var c=a.getElementsByTagName("a"),g=c.length,i;for(i=0;i<g;i++){var f=c[i];var h=function(o){o.preventDefault();n[this.id.replace(e+"_","")].action.apply(r,[t]);r.hideContextMenu()};google.maps.event.clearListeners(f,"click");google.maps.event.addDomListenerOnce(f,"click",h,false)}var u=p.apply(this,[r.el]),d=u[0]+t.pixel.x-15,m=u[1]+t.pixel.y-15;a.style.left=d+"px";a.style.top=m+"px"};this.buildContextMenu=function(e,t){if(e==="marker"){t.pixel={};var o=new google.maps.OverlayView;o.setMap(r.map);o.draw=function(){var n=o.getProjection(),i=t.marker.getPosition();t.pixel=n.fromLatLngToContainerPixel(i);T(e,t)}}else{T(e,t)}var n=l("gmaps_context_menu");setTimeout(function(){n.style.display="block"},0)};this.setContextMenu=function(e){window.context_menu[r.el.id][e.control]={};var t,n=o.createElement("ul");for(t in e.options){if(e.options.hasOwnProperty(t)){var i=e.options[t];window.context_menu[r.el.id][e.control][i.name]={title:i.title,action:i.action}}}n.id="gmaps_context_menu";n.style.display="none";n.style.position="absolute";n.style.minWidth="100px";n.style.background="white";n.style.listStyle="none";n.style.padding="8px";n.style.boxShadow="2px 2px 6px #ccc";if(!l("gmaps_context_menu")){o.body.appendChild(n)}var s=l("gmaps_context_menu");google.maps.event.addDomListener(s,"mouseout",function(e){if(!e.relatedTarget||!this.contains(e.relatedTarget)){window.setTimeout(function(){s.style.display="none"},400)}},false)};this.hideContextMenu=function(){var e=l("gmaps_context_menu");if(e){e.style.display="none"}};var z=function(t,o){google.maps.event.addListener(t,o,function(t){if(t==undefined){t=this}e[o].apply(this,[t]);r.hideContextMenu()})};google.maps.event.addListener(this.map,"zoom_changed",this.hideContextMenu);for(var S=0;S<c.length;S++){var W=c[S];if(W in e){z(this.map,W)}}for(var S=0;S<g.length;S++){var W=g[S];if(W in e){z(this.map,W)}}google.maps.event.addListener(this.map,"rightclick",function(t){if(e.rightclick){e.rightclick.apply(this,[t])}if(window.context_menu[r.el.id]["map"]!=undefined){r.buildContextMenu("map",t)}});this.refresh=function(){google.maps.event.trigger(this.map,"resize")};this.fitZoom=function(){var e=[],t=this.markers.length,o;for(o=0;o<t;o++){if(typeof this.markers[o].visible==="boolean"&&this.markers[o].visible){e.push(this.markers[o].getPosition())}}this.fitLatLngBounds(e)};this.fitLatLngBounds=function(e){var t=e.length,o=new google.maps.LatLngBounds,n;for(n=0;n<t;n++){o.extend(e[n])}this.map.fitBounds(o)};this.setCenter=function(e,t,o){this.map.panTo(new google.maps.LatLng(e,t));if(o){o()}};this.getElement=function(){return this.el};this.zoomIn=function(e){e=e||1;this.zoom=this.map.getZoom()+e;this.map.setZoom(this.zoom)};this.zoomOut=function(e){e=e||1;this.zoom=this.map.getZoom()-e;this.map.setZoom(this.zoom)};var R=[],I;for(I in this.map){if(typeof this.map[I]=="function"&&!this[I]){R.push(I)}}for(s=0;s<R.length;s++){(function(e,t,o){e[o]=function(){return t[o].apply(t,arguments)}})(this,this.map,R[s])}};return n}(this);c.prototype.createControl=function(e){var t=document.createElement("div");t.style.cursor="pointer";if(e.disableDefaultStyles!==true){t.style.fontFamily="Roboto, Arial, sans-serif";t.style.fontSize="11px";t.style.boxShadow="rgba(0, 0, 0, 0.298039) 0px 1px 4px -1px"}for(var o in e.style){t.style[o]=e.style[o]}if(e.id){t.id=e.id}if(e.title){t.title=e.title}if(e.classes){t.className=e.classes}if(e.content){if(typeof e.content==="string"){t.innerHTML=e.content}else if(e.content instanceof HTMLElement){t.appendChild(e.content)}}if(e.position){t.position=google.maps.ControlPosition[e.position.toUpperCase()]}for(var n in e.events){(function(t,o){google.maps.event.addDomListener(t,o,function(){e.events[o].apply(this,[this])})})(t,n)}t.index=1;return t};c.prototype.addControl=function(e){var t=this.createControl(e);this.controls.push(t);this.map.controls[t.position].push(t);return t};c.prototype.removeControl=function(e){var t=null,o;for(o=0;o<this.controls.length;o++){if(this.controls[o]==e){t=this.controls[o].position;this.controls.splice(o,1)}}if(t){for(o=0;o<this.map.controls.length;o++){var n=this.map.controls[e.position];if(n.getAt(o)==e){n.removeAt(o);break}}}return e};c.prototype.createMarker=function(e){if(e.lat==undefined&&e.lng==undefined&&e.position==undefined){throw"No latitude or longitude defined."}var o=this,n=e.details,i=e.fences,r=e.outside,s={position:new google.maps.LatLng(e.lat,e.lng),map:null},a=t(s,e);delete a.lat;delete a.lng;delete a.fences;delete a.outside;var l=new google.maps.Marker(a);l.fences=i;if(e.infoWindow){l.infoWindow=new google.maps.InfoWindow(e.infoWindow);var p=["closeclick","content_changed","domready","position_changed","zindex_changed"];for(var c=0;c<p.length;c++){(function(t,o){if(e.infoWindow[o]){google.maps.event.addListener(t,o,function(t){e.infoWindow[o].apply(this,[t])})}})(l.infoWindow,p[c])}}var g=["animation_changed","clickable_changed","cursor_changed","draggable_changed","flat_changed","icon_changed","position_changed","shadow_changed","shape_changed","title_changed","visible_changed","zindex_changed"];var f=["dblclick","drag","dragend","dragstart","mousedown","mouseout","mouseover","mouseup"];for(var c=0;c<g.length;c++){(function(t,o){if(e[o]){google.maps.event.addListener(t,o,function(){e[o].apply(this,[this])})}})(l,g[c])}for(var c=0;c<f.length;c++){(function(t,o,n){if(e[n]){google.maps.event.addListener(o,n,function(o){if(!o.pixel){o.pixel=t.getProjection().fromLatLngToPoint(o.latLng)}e[n].apply(this,[o])})}})(this.map,l,f[c])}google.maps.event.addListener(l,"click",function(){this.details=n;if(e.click){e.click.apply(this,[this])}if(l.infoWindow){o.hideInfoWindows();l.infoWindow.open(o.map,l)}});google.maps.event.addListener(l,"rightclick",function(t){t.marker=this;if(e.rightclick){e.rightclick.apply(this,[t])}if(window.context_menu[o.el.id]["marker"]!=undefined){o.buildContextMenu("marker",t)}});if(l.fences){google.maps.event.addListener(l,"dragend",function(){o.checkMarkerGeofence(l,function(e,t){r(e,t)})})}return l};c.prototype.addMarker=function(e){var t;if(e.hasOwnProperty("gm_accessors_")){t=e}else{if(e.hasOwnProperty("lat")&&e.hasOwnProperty("lng")||e.position){t=this.createMarker(e)}else{throw"No latitude or longitude defined."}}t.setMap(this.map);if(this.markerClusterer){this.markerClusterer.addMarker(t)}this.markers.push(t);c.fire("marker_added",t,this);return t};c.prototype.addMarkers=function(e){for(var t=0,o;o=e[t];t++){this.addMarker(o)}return this.markers};c.prototype.hideInfoWindows=function(){for(var e=0,t;t=this.markers[e];e++){if(t.infoWindow){t.infoWindow.close()}}};c.prototype.removeMarker=function(e){for(var t=0;t<this.markers.length;t++){if(this.markers[t]===e){this.markers[t].setMap(null);this.markers.splice(t,1);if(this.markerClusterer){this.markerClusterer.removeMarker(e)}c.fire("marker_removed",e,this);break}}return e};c.prototype.removeMarkers=function(e){var t=[];if(typeof e=="undefined"){for(var o=0;o<this.markers.length;o++){var n=this.markers[o];n.setMap(null);c.fire("marker_removed",n,this)}if(this.markerClusterer&&this.markerClusterer.clearMarkers){this.markerClusterer.clearMarkers()}this.markers=t}else{for(var o=0;o<e.length;o++){var i=this.markers.indexOf(e[o]);if(i>-1){var n=this.markers[i];n.setMap(null);if(this.markerClusterer){this.markerClusterer.removeMarker(n)}c.fire("marker_removed",n,this)}}for(var o=0;o<this.markers.length;o++){var n=this.markers[o];if(n.getMap()!=null){t.push(n)}}this.markers=t}};c.prototype.drawOverlay=function(e){var t=new google.maps.OverlayView,o=true;t.setMap(this.map);if(e.auto_show!=null){o=e.auto_show}t.onAdd=function(){var o=document.createElement("div");o.style.borderStyle="none";o.style.borderWidth="0px";o.style.position="absolute";o.style.zIndex=100;o.innerHTML=e.content;t.el=o;if(!e.layer){e.layer="overlayLayer"}var n=this.getPanes(),i=n[e.layer],r=["contextmenu","DOMMouseScroll","dblclick","mousedown"];i.appendChild(o);for(var s=0;s<r.length;s++){(function(e,t){google.maps.event.addDomListener(e,t,function(e){if(navigator.userAgent.toLowerCase().indexOf("msie")!=-1&&document.all){e.cancelBubble=true;e.returnValue=false}else{e.stopPropagation()}})})(o,r[s])}if(e.click){n.overlayMouseTarget.appendChild(t.el);google.maps.event.addDomListener(t.el,"click",function(){e.click.apply(t,[t])})}google.maps.event.trigger(this,"ready")};t.draw=function(){var n=this.getProjection(),i=n.fromLatLngToDivPixel(new google.maps.LatLng(e.lat,e.lng));e.horizontalOffset=e.horizontalOffset||0;e.verticalOffset=e.verticalOffset||0;var r=t.el,s=r.children[0],a=s.clientHeight,l=s.clientWidth;switch(e.verticalAlign){case"top":r.style.top=i.y-a+e.verticalOffset+"px";break;default:case"middle":r.style.top=i.y-a/2+e.verticalOffset+"px";break;case"bottom":r.style.top=i.y+e.verticalOffset+"px";break}switch(e.horizontalAlign){case"left":r.style.left=i.x-l+e.horizontalOffset+"px";break;default:case"center":r.style.left=i.x-l/2+e.horizontalOffset+"px";break;case"right":r.style.left=i.x+e.horizontalOffset+"px";break}r.style.display=o?"block":"none";if(!o){e.show.apply(this,[r])}};t.onRemove=function(){var o=t.el;if(e.remove){e.remove.apply(this,[o])}else{t.el.parentNode.removeChild(t.el);t.el=null}};this.overlays.push(t);return t};c.prototype.removeOverlay=function(e){for(var t=0;t<this.overlays.length;t++){if(this.overlays[t]===e){this.overlays[t].setMap(null);this.overlays.splice(t,1);break}}};c.prototype.removeOverlays=function(){for(var e=0,t;t=this.overlays[e];e++){t.setMap(null)}this.overlays=[]};c.prototype.drawPolyline=function(e){var t=[],o=e.path;if(o.length){if(o[0][0]===undefined){t=o}else{for(var n=0,i;i=o[n];n++){t.push(new google.maps.LatLng(i[0],i[1]))}}}var r={map:this.map,path:t,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight,geodesic:e.geodesic,clickable:true,editable:false,visible:true};if(e.hasOwnProperty("clickable")){r.clickable=e.clickable}if(e.hasOwnProperty("editable")){r.editable=e.editable}if(e.hasOwnProperty("icons")){r.icons=e.icons}if(e.hasOwnProperty("zIndex")){r.zIndex=e.zIndex}var s=new google.maps.Polyline(r);var a=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var l=0;l<a.length;l++){(function(t,o){if(e[o]){google.maps.event.addListener(t,o,function(t){e[o].apply(this,[t])})}})(s,a[l])}this.polylines.push(s);c.fire("polyline_added",s,this);return s};c.prototype.removePolyline=function(e){for(var t=0;t<this.polylines.length;t++){if(this.polylines[t]===e){this.polylines[t].setMap(null);this.polylines.splice(t,1);c.fire("polyline_removed",e,this);break}}};c.prototype.removePolylines=function(){for(var e=0,t;t=this.polylines[e];e++){t.setMap(null)}this.polylines=[]};c.prototype.drawCircle=function(e){e=t({map:this.map,center:new google.maps.LatLng(e.lat,e.lng)},e);delete e.lat;delete e.lng;var o=new google.maps.Circle(e),n=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var i=0;i<n.length;i++){(function(t,o){if(e[o]){google.maps.event.addListener(t,o,function(t){e[o].apply(this,[t])})}})(o,n[i])}this.polygons.push(o);return o};c.prototype.drawRectangle=function(e){e=t({map:this.map},e);var o=new google.maps.LatLngBounds(new google.maps.LatLng(e.bounds[0][0],e.bounds[0][1]),new google.maps.LatLng(e.bounds[1][0],e.bounds[1][1]));e.bounds=o;var n=new google.maps.Rectangle(e),i=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var r=0;r<i.length;r++){(function(t,o){if(e[o]){google.maps.event.addListener(t,o,function(t){e[o].apply(this,[t])})}})(n,i[r])}this.polygons.push(n);return n};c.prototype.drawPolygon=function(e){var o=false;if(e.hasOwnProperty("useGeoJSON")){o=e.useGeoJSON}delete e.useGeoJSON;e=t({map:this.map},e);if(o==false){e.paths=[e.paths.slice(0)]}if(e.paths.length>0){if(e.paths[0].length>0){e.paths=i(n(e.paths,s,o))}}var r=new google.maps.Polygon(e),a=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];for(var l=0;l<a.length;l++){(function(t,o){if(e[o]){google.maps.event.addListener(t,o,function(t){e[o].apply(this,[t])})}})(r,a[l])}this.polygons.push(r);c.fire("polygon_added",r,this);return r};c.prototype.removePolygon=function(e){for(var t=0;t<this.polygons.length;t++){if(this.polygons[t]===e){this.polygons[t].setMap(null);this.polygons.splice(t,1);c.fire("polygon_removed",e,this);break}}};c.prototype.removePolygons=function(){for(var e=0,t;t=this.polygons[e];e++){t.setMap(null)}this.polygons=[]};c.prototype.getFromFusionTables=function(e){var t=e.events;delete e.events;var o=e,n=new google.maps.FusionTablesLayer(o);for(var i in t){(function(e,o){google.maps.event.addListener(e,o,function(e){t[o].apply(this,[e])})})(n,i)}this.layers.push(n);return n};c.prototype.loadFromFusionTables=function(e){var t=this.getFromFusionTables(e);t.setMap(this.map);return t};c.prototype.getFromKML=function(e){var t=e.url,o=e.events;delete e.url;delete e.events;var n=e,i=new google.maps.KmlLayer(t,n);for(var r in o){(function(e,t){google.maps.event.addListener(e,t,function(e){o[t].apply(this,[e])})})(i,r)}this.layers.push(i);return i};c.prototype.loadFromKML=function(e){var t=this.getFromKML(e);t.setMap(this.map);return t};c.prototype.addLayer=function(e,t){t=t||{};var o;switch(e){case"weather":this.singleLayers.weather=o=new google.maps.weather.WeatherLayer;break;case"clouds":this.singleLayers.clouds=o=new google.maps.weather.CloudLayer;break;case"traffic":this.singleLayers.traffic=o=new google.maps.TrafficLayer;break;case"transit":this.singleLayers.transit=o=new google.maps.TransitLayer;break;case"bicycling":this.singleLayers.bicycling=o=new google.maps.BicyclingLayer;break;case"panoramio":this.singleLayers.panoramio=o=new google.maps.panoramio.PanoramioLayer;o.setTag(t.filter);delete t.filter;if(t.click){google.maps.event.addListener(o,"click",function(e){t.click(e);delete t.click})}break;case"places":this.singleLayers.places=o=new google.maps.places.PlacesService(this.map);if(t.search||t.nearbySearch||t.radarSearch){var n={bounds:t.bounds||null,keyword:t.keyword||null,location:t.location||null,name:t.name||null,radius:t.radius||null,rankBy:t.rankBy||null,types:t.types||null};if(t.radarSearch){o.radarSearch(n,t.radarSearch)}if(t.search){o.search(n,t.search)}if(t.nearbySearch){o.nearbySearch(n,t.nearbySearch)}}if(t.textSearch){var i={bounds:t.bounds||null,location:t.location||null,query:t.query||null,radius:t.radius||null};o.textSearch(i,t.textSearch)}break}if(o!==undefined){if(typeof o.setOptions=="function"){o.setOptions(t)}if(typeof o.setMap=="function"){o.setMap(this.map)}return o}};c.prototype.removeLayer=function(e){if(typeof e=="string"&&this.singleLayers[e]!==undefined){this.singleLayers[e].setMap(null);delete this.singleLayers[e]}else{for(var t=0;t<this.layers.length;t++){if(this.layers[t]===e){this.layers[t].setMap(null);this.layers.splice(t,1);break}}}};var g,f;c.prototype.getRoutes=function(e){switch(e.travelMode){case"bicycling":g=google.maps.TravelMode.BICYCLING;break;case"transit":g=google.maps.TravelMode.TRANSIT;break;case"driving":g=google.maps.TravelMode.DRIVING;break;default:g=google.maps.TravelMode.WALKING;break}if(e.unitSystem==="imperial"){f=google.maps.UnitSystem.IMPERIAL}else{f=google.maps.UnitSystem.METRIC}var o={avoidHighways:false,avoidTolls:false,optimizeWaypoints:false,waypoints:[]},n=t(o,e);n.origin=/string/.test(typeof e.origin)?e.origin:new google.maps.LatLng(e.origin[0],e.origin[1]);n.destination=/string/.test(typeof e.destination)?e.destination:new google.maps.LatLng(e.destination[0],e.destination[1]);n.travelMode=g;n.unitSystem=f;delete n.callback;delete n.error;var i=this,r=[],s=new google.maps.DirectionsService;s.route(n,function(t,o){if(o===google.maps.DirectionsStatus.OK){for(var n in t.routes){if(t.routes.hasOwnProperty(n)){r.push(t.routes[n])}}if(e.callback){e.callback(r,t,o)}}else{if(e.error){e.error(t,o)}}})};c.prototype.removeRoutes=function(){this.routes.length=0};c.prototype.getElevations=function(e){e=t({locations:[],path:false,samples:256},e);if(e.locations.length>0){if(e.locations[0].length>0){e.locations=i(n([e.locations],s,false))}}var o=e.callback;delete e.callback;var r=new google.maps.ElevationService;if(!e.path){delete e.path;delete e.samples;r.getElevationForLocations(e,function(e,t){if(o&&typeof o==="function"){o(e,t)}})}else{var a={path:e.locations,samples:e.samples};r.getElevationAlongPath(a,function(e,t){if(o&&typeof o==="function"){o(e,t)}})}};c.prototype.cleanRoute=c.prototype.removePolylines;c.prototype.renderRoute=function(e,o){var n=this,i=typeof o.panel==="string"?document.getElementById(o.panel.replace("#","")):o.panel,r;o.panel=i;o=t({map:this.map},o);r=new google.maps.DirectionsRenderer(o);this.getRoutes({origin:e.origin,destination:e.destination,travelMode:e.travelMode,waypoints:e.waypoints,unitSystem:e.unitSystem,error:e.error,avoidHighways:e.avoidHighways,avoidTolls:e.avoidTolls,optimizeWaypoints:e.optimizeWaypoints,callback:function(e,t,o){if(o===google.maps.DirectionsStatus.OK){r.setDirections(t)}}})};c.prototype.drawRoute=function(e){var t=this;this.getRoutes({origin:e.origin,destination:e.destination,travelMode:e.travelMode,waypoints:e.waypoints,unitSystem:e.unitSystem,error:e.error,avoidHighways:e.avoidHighways,avoidTolls:e.avoidTolls,optimizeWaypoints:e.optimizeWaypoints,callback:function(o){if(o.length>0){var n={path:o[o.length-1].overview_path,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight};if(e.hasOwnProperty("icons")){n.icons=e.icons}t.drawPolyline(n);if(e.callback){e.callback(o[o.length-1])}}}})};c.prototype.travelRoute=function(e){if(e.origin&&e.destination){this.getRoutes({origin:e.origin,destination:e.destination,travelMode:e.travelMode,waypoints:e.waypoints,unitSystem:e.unitSystem,error:e.error,callback:function(t){if(t.length>0&&e.start){e.start(t[t.length-1])}if(t.length>0&&e.step){var o=t[t.length-1];if(o.legs.length>0){var n=o.legs[0].steps;for(var i=0,r;r=n[i];i++){r.step_number=i;e.step(r,o.legs[0].steps.length-1)}}}if(t.length>0&&e.end){e.end(t[t.length-1])}}})}else if(e.route){if(e.route.legs.length>0){var t=e.route.legs[0].steps;for(var o=0,n;n=t[o];o++){n.step_number=o;e.step(n)}}}};c.prototype.drawSteppedRoute=function(e){var t=this;if(e.origin&&e.destination){this.getRoutes({origin:e.origin,destination:e.destination,travelMode:e.travelMode,waypoints:e.waypoints,error:e.error,callback:function(o){if(o.length>0&&e.start){e.start(o[o.length-1])}if(o.length>0&&e.step){var n=o[o.length-1];if(n.legs.length>0){var i=n.legs[0].steps;for(var r=0,s;s=i[r];r++){s.step_number=r;var a={path:s.path,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight};if(e.hasOwnProperty("icons")){a.icons=e.icons}t.drawPolyline(a);e.step(s,n.legs[0].steps.length-1)}}}if(o.length>0&&e.end){e.end(o[o.length-1])}}})}else if(e.route){if(e.route.legs.length>0){var o=e.route.legs[0].steps;for(var n=0,i;i=o[n];n++){i.step_number=n;var r={path:i.path,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight};if(e.hasOwnProperty("icons")){r.icons=e.icons}t.drawPolyline(r);e.step(i)}}}};c.Route=function(e){this.origin=e.origin;this.destination=e.destination;this.waypoints=e.waypoints;this.map=e.map;this.route=e.route;this.step_count=0;this.steps=this.route.legs[0].steps;this.steps_length=this.steps.length;var t={path:new google.maps.MVCArray,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWeight:e.strokeWeight};if(e.hasOwnProperty("icons")){t.icons=e.icons}this.polyline=this.map.drawPolyline(t).getPath()};c.Route.prototype.getRoute=function(t){var o=this;this.map.getRoutes({origin:this.origin,destination:this.destination,travelMode:t.travelMode,waypoints:this.waypoints||[],error:t.error,callback:function(){o.route=e[0];if(t.callback){t.callback.call(o)}}})};c.Route.prototype.back=function(){if(this.step_count>0){this.step_count--;var e=this.route.legs[0].steps[this.step_count].path;for(var t in e){if(e.hasOwnProperty(t)){this.polyline.pop()}}}};c.Route.prototype.forward=function(){if(this.step_count<this.steps_length){var e=this.route.legs[0].steps[this.step_count].path;for(var t in e){if(e.hasOwnProperty(t)){this.polyline.push(e[t])}}this.step_count++}};c.prototype.checkGeofence=function(e,t,o){return o.containsLatLng(new google.maps.LatLng(e,t))};c.prototype.checkMarkerGeofence=function(e,t){if(e.fences){for(var o=0,n;n=e.fences[o];o++){var i=e.getPosition();if(!this.checkGeofence(i.lat(),i.lng(),n)){t(e,n)}}}};c.prototype.toImage=function(e){var e=e||{},t={};t["size"]=e["size"]||[this.el.clientWidth,this.el.clientHeight];t["lat"]=this.getCenter().lat();t["lng"]=this.getCenter().lng();if(this.markers.length>0){t["markers"]=[];for(var o=0;o<this.markers.length;o++){t["markers"].push({lat:this.markers[o].getPosition().lat(),lng:this.markers[o].getPosition().lng()})}}if(this.polylines.length>0){var n=this.polylines[0];t["polyline"]={};t["polyline"]["path"]=google.maps.geometry.encoding.encodePath(n.getPath());t["polyline"]["strokeColor"]=n.strokeColor;t["polyline"]["strokeOpacity"]=n.strokeOpacity;t["polyline"]["strokeWeight"]=n.strokeWeight}return c.staticMapURL(t)};c.staticMapURL=function(e){var t=[],o,n=(location.protocol==="file:"?"http:":location.protocol)+"//maps.googleapis.com/maps/api/staticmap";if(e.url){n=e.url;delete e.url}n+="?";var i=e.markers;delete e.markers;if(!i&&e.marker){i=[e.marker];delete e.marker}var r=e.styles;delete e.styles;var s=e.polyline;delete e.polyline;if(e.center){t.push("center="+e.center);delete e.center}else if(e.address){t.push("center="+e.address);delete e.address}else if(e.lat){t.push(["center=",e.lat,",",e.lng].join(""));delete e.lat;delete e.lng}else if(e.visible){var a=encodeURI(e.visible.join("|"));t.push("visible="+a)}var l=e.size;if(l){if(l.join){l=l.join("x")}delete e.size}else{l="630x300"}t.push("size="+l);if(!e.zoom&&e.zoom!==false){e.zoom=15}var p=e.hasOwnProperty("sensor")?!!e.sensor:true;delete e.sensor;t.push("sensor="+p);for(var c in e){if(e.hasOwnProperty(c)){t.push(c+"="+e[c])}}if(i){var g,f;for(var h=0;o=i[h];h++){g=[];if(o.size&&o.size!=="normal"){g.push("size:"+o.size);delete o.size}else if(o.icon){g.push("icon:"+encodeURI(o.icon));delete o.icon}if(o.color){g.push("color:"+o.color.replace("#","0x"));delete o.color}if(o.label){g.push("label:"+o.label[0].toUpperCase());delete o.label}f=o.address?o.address:o.lat+","+o.lng;delete o.address;delete o.lat;delete o.lng;for(var c in o){if(o.hasOwnProperty(c)){g.push(c+":"+o[c])}}if(g.length||h===0){g.push(f);g=g.join("|");t.push("markers="+encodeURI(g))}else{g=t.pop()+encodeURI("|"+f);t.push(g)}}}if(r){for(var h=0;h<r.length;h++){var u=[];if(r[h].featureType){u.push("feature:"+r[h].featureType.toLowerCase())}if(r[h].elementType){u.push("element:"+r[h].elementType.toLowerCase())}for(var d=0;d<r[h].stylers.length;d++){for(var m in r[h].stylers[d]){var y=r[h].stylers[d][m];if(m=="hue"||m=="color"){y="0x"+y.substring(1)}u.push(m+":"+y)}}var v=u.join("|");if(v!=""){t.push("style="+v)}}}function k(e,t){if(e[0]==="#"){e=e.replace("#","0x");if(t){t=parseFloat(t);t=Math.min(1,Math.max(t,0));if(t===0){return"0x00000000"}t=(t*255).toString(16);if(t.length===1){t+=t}e=e.slice(0,8)+t}}return e}if(s){o=s;s=[];if(o.strokeWeight){s.push("weight:"+parseInt(o.strokeWeight,10))}if(o.strokeColor){var w=k(o.strokeColor,o.strokeOpacity);s.push("color:"+w)}if(o.fillColor){var L=k(o.fillColor,o.fillOpacity);s.push("fillcolor:"+L)}var b=o.path;if(b.join){for(var d=0,_;_=b[d];d++){s.push(_.join(","))}}else{s.push("enc:"+b)}s=s.join("|");t.push("path="+encodeURI(s))}var M=window.devicePixelRatio||1;t.push("scale="+M);t=t.join("&");return n+t};c.prototype.addMapType=function(e,t){if(t.hasOwnProperty("getTileUrl")&&typeof t["getTileUrl"]=="function"){t.tileSize=t.tileSize||new google.maps.Size(256,256);var o=new google.maps.ImageMapType(t);this.map.mapTypes.set(e,o)}else{throw"'getTileUrl' function required."}};c.prototype.addOverlayMapType=function(e){if(e.hasOwnProperty("getTile")&&typeof e["getTile"]=="function"){var t=e.index;delete e.index;this.map.overlayMapTypes.insertAt(t,e)}else{throw"'getTile' function required."}};c.prototype.removeOverlayMapType=function(e){this.map.overlayMapTypes.removeAt(e)};c.prototype.addStyle=function(e){var t=new google.maps.StyledMapType(e.styles,{name:e.styledMapName});this.map.mapTypes.set(e.mapTypeId,t)};c.prototype.setStyle=function(e){this.map.setMapTypeId(e)};c.prototype.createPanorama=function(e){if(!e.hasOwnProperty("lat")||!e.hasOwnProperty("lng")){e.lat=this.getCenter().lat();e.lng=this.getCenter().lng()}this.panorama=c.createPanorama(e);this.map.setStreetView(this.panorama);return this.panorama};c.createPanorama=function(e){var o=l(e.el,e.context);e.position=new google.maps.LatLng(e.lat,e.lng);delete e.el;delete e.context;delete e.lat;delete e.lng;var n=["closeclick","links_changed","pano_changed","position_changed","pov_changed","resize","visible_changed"],i=t({visible:true},e);for(var r=0;r<n.length;r++){delete i[n[r]]}var s=new google.maps.StreetViewPanorama(o,i);for(var r=0;r<n.length;r++){(function(t,o){if(e[o]){google.maps.event.addListener(t,o,function(){e[o].apply(this)})}})(s,n[r])}return s};c.prototype.on=function(e,t){return c.on(e,this,t)};c.prototype.off=function(e){c.off(e,this)};c.prototype.once=function(e,t){return c.once(e,this,t)};c.custom_events=["marker_added","marker_removed","polyline_added","polyline_removed","polygon_added","polygon_removed","geolocated","geolocation_failed"];c.on=function(e,t,o){if(c.custom_events.indexOf(e)==-1){if(t instanceof c)t=t.map;return google.maps.event.addListener(t,e,o)}else{var n={handler:o,eventName:e};t.registered_events[e]=t.registered_events[e]||[];t.registered_events[e].push(n);return n}};c.off=function(e,t){if(c.custom_events.indexOf(e)==-1){if(t instanceof c)t=t.map;google.maps.event.clearListeners(t,e)}else{t.registered_events[e]=[]}};c.once=function(e,t,o){if(c.custom_events.indexOf(e)==-1){if(t instanceof c)t=t.map;return google.maps.event.addListenerOnce(t,e,o)}};c.fire=function(e,t,o){if(c.custom_events.indexOf(e)==-1){google.maps.event.trigger(t,e,Array.prototype.slice.apply(arguments).slice(2))}else{if(e in o.registered_events){var n=o.registered_events[e];for(var i=0;i<n.length;i++){(function(e,t,o){e.apply(t,[o])})(n[i]["handler"],o,t)}}}};c.geolocate=function(e){var t=e.always||e.complete;if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(o){e.success(o);if(t){t()}},function(o){e.error(o);if(t){t()}},e.options)}else{e.not_supported();if(t){t()}}};c.geocode=function(e){this.geocoder=new google.maps.Geocoder;var t=e.callback;if(e.hasOwnProperty("lat")&&e.hasOwnProperty("lng")){e.latLng=new google.maps.LatLng(e.lat,e.lng)}delete e.lat;delete e.lng;delete e.callback;this.geocoder.geocode(e,function(e,o){t(e,o)})};if(typeof window.google==="object"&&window.google.maps){if(!google.maps.Polygon.prototype.getBounds){google.maps.Polygon.prototype.getBounds=function(e){var t=new google.maps.LatLngBounds;var o=this.getPaths();var n;for(var i=0;i<o.getLength();i++){n=o.getAt(i);for(var r=0;r<n.getLength();r++){t.extend(n.getAt(r))}}return t}}if(!google.maps.Polygon.prototype.containsLatLng){google.maps.Polygon.prototype.containsLatLng=function(e){var t=this.getBounds();if(t!==null&&!t.contains(e)){return false}var o=false;var n=this.getPaths().getLength();for(var i=0;i<n;i++){var r=this.getPaths().getAt(i);var s=r.getLength();var a=s-1;for(var l=0;l<s;l++){var p=r.getAt(l);var c=r.getAt(a);if(p.lng()<e.lng()&&c.lng()>=e.lng()||c.lng()<e.lng()&&p.lng()>=e.lng()){if(p.lat()+(e.lng()-p.lng())/(c.lng()-p.lng())*(c.lat()-p.lat())<e.lat()){o=!o}}a=l}}return o}}if(!google.maps.Circle.prototype.containsLatLng){google.maps.Circle.prototype.containsLatLng=function(e){if(google.maps.geometry){return google.maps.geometry.spherical.computeDistanceBetween(this.getCenter(),e)<=this.getRadius();
}else{return true}}}google.maps.Rectangle.prototype.containsLatLng=function(e){return this.getBounds().contains(e)};google.maps.LatLngBounds.prototype.containsLatLng=function(e){return this.contains(e)};google.maps.Marker.prototype.setFences=function(e){this.fences=e};google.maps.Marker.prototype.addFence=function(e){this.fences.push(e)};google.maps.Marker.prototype.getId=function(){return this["__gm_id"]}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e){"use strict";if(this==null){throw new TypeError}var t=Object(this);var o=t.length>>>0;if(o===0){return-1}var n=0;if(arguments.length>1){n=Number(arguments[1]);if(n!=n){n=0}else if(n!=0&&n!=Infinity&&n!=-Infinity){n=(n>0||-1)*Math.floor(Math.abs(n))}}if(n>=o){return-1}var i=n>=0?n:Math.max(o-Math.abs(n),0);for(;i<o;i++){if(i in t&&t[i]===e){return i}}return-1}}return c});