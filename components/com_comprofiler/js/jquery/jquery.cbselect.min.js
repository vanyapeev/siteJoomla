(function(e){var t=[];var s={init:function(s){return this.each(function(){var i=this;var l=e(i).data("cbselect");if(l){return}l={};l.type=e(i).prop("multiple")?"multiple":"single";l.options=typeof s!="undefined"?s:{};l.defaults=e.fn.cbselect.defaults;l.settings=e.extend(true,{},l.defaults,l.options);l.element=e(i);if(l.settings.useData){e.each(l.defaults,function(e,t){if(e!="init"&&e!="useData"){var s=l.element.data("cbselect"+e.charAt(0).toUpperCase()+e.slice(1));if(typeof s!="undefined"){l.settings[e]=s}else{s=l.element.data("cbselect"+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());if(typeof s!="undefined"){l.settings[e]=s}}}})}l.element.triggerHandler("cbselect.init.before",[l]);if(!l.settings.init){return}if(l.settings.tags){var a=l.settings.separator;if(!a){a=[","]}l.settings.tokenSeparators=a}if(l.type=="multiple"||l.settings.tags){if(l.settings.width=="calculate"){l.settings.width="auto"}if(l.settings.height=="calculate"){l.settings.height="auto"}}var c=null;var o=null;if(l.settings.width=="calculate"||l.settings.height=="calculate"){c=l.element.outerWidth()+50;o=l.element.outerHeight();if(l.element.is(":hidden")){var r=l.element.css("width");var d=l.element.css("height");var m=l.element.clone(false).attr({id:"",class:""}).css({position:"absolute",display:"block",visibility:"hidden",width:"auto",height:"auto",minWidth:r&&r!="0px"?r:"auto",minHeight:d&&d!="0px"?d:"auto",padding:l.element.css("padding"),border:l.element.css("border"),margin:l.element.css("margin"),fontFamily:l.element.css("font-family"),fontSize:l.element.css("font-size"),fontWeight:l.element.css("font-weight"),lineHeight:l.element.css("line-height"),boxSizing:l.element.css("box-sizing"),wordSpacing:l.element.css("word-spacing")}).appendTo("body");c=m.outerWidth()+50;o=m.outerHeight();m.remove()}if(l.settings.width=="calculate"){l.settings.width=c}if(l.settings.height=="calculate"){l.settings.height=o}}if(l.settings.width=="element"){c=l.element.outerWidth();if(!c||c=="0px"){c="auto"}}else if(l.settings.width=="copy"||l.settings.width=="resolve"){c=l.element.css("width");if(!c||c=="0px"){c="auto"}}else if(l.settings.width=="off"){c=null}else if(!c){c=l.settings.width}if(l.settings.height=="element"){o=l.element.outerHeight();if(!o||o=="0px"){o="auto"}}else if(l.settings.height=="copy"||l.settings.height=="resolve"){o=l.element.css("height");if(!o||o=="0px"){o="auto"}}else if(l.settings.height=="off"){o=null}else if(!o){o=l.settings.height}var f=null;if(l.type=="multiple"){if(c=="auto"&&l.settings.placeholder){var h=e("<span>"+l.settings.placeholder+"</span>").css({position:"absolute",display:"block",visibility:"hidden",padding:l.element.css("padding"),border:l.element.css("border"),margin:l.element.css("margin"),fontFamily:l.element.css("font-family"),fontSize:l.element.css("font-size"),fontWeight:l.element.css("font-weight"),lineHeight:l.element.css("line-height"),boxSizing:l.element.css("box-sizing"),wordSpacing:l.element.css("word-spacing")}).appendTo("body");f=h.outerWidth()+5;h.remove()}}else if(l.settings.placeholder){l.settings.allowClear=true}var u=l.element.is('.cbTooltip,[data-hascbtooltip="true"]');if(u){l.element.attr("data-cbtooltip-open-target","#cbselect_"+l.element.attr("id"));l.element.attr("data-cbtooltip-close-target","#cbselect_"+l.element.attr("id"));l.element.attr("data-cbtooltip-position-target","#cbselect_"+l.element.attr("id"));l.element.data("cbtooltip-open-target","#cbselect_"+l.element.attr("id"));l.element.data("cbtooltip-close-target","#cbselect_"+l.element.attr("id"));l.element.data("cbtooltip-position-target","#cbselect_"+l.element.attr("id"))}var p=[];e.each(l.element.attr("class").split(/\s+/),function(e,t){if(t!="cbTooltip"&&t!="cbSelect"){p.push(t)}});var g=e.extend(true,{},l.settings);delete g["separator"];delete g["containerCssClass"];delete g["dropdownCssClass"];l.element.select2(g);l.select2=l.element.data("select2");l.container=l.select2.$container;l.dropdown=l.select2.$dropdown;if(f){l.select2.$selection.css("min-width",f)}e.each(p,function(e,t){l.container.addClass(t)});if(l.type=="multiple"){l.dropdown.addClass("select2-container--multiple");l.container.addClass("select2-container--multiple")}else{l.dropdown.addClass("select2-container--single");l.container.addClass("select2-container--single")}if(l.settings.tags){l.dropdown.addClass("select2-container--tags");l.container.addClass("select2-container--tags")}n(l);l.container.on("keyup",".select2-search__field",function(){n(l)});l.element.on("select2:open",function(){n(l);l.element.triggerHandler("cbselect.open",[l])}).on("select2:close",function(){n(l);l.element.triggerHandler("cbselect.close",[l])}).on("select2:select",function(e){n(l);if(l.settings.placeholder){l.element.cbselect("unset",l.select2.selection.placeholder.id)}l.element.triggerHandler("cbselect.selecting",[l,e.params.data.id,e.params.data.element])}).on("select2:unselect",function(e){n(l);if(l.settings.placeholder&&l.element.cbselect("get")===null){l.element.cbselect("set",l.select2.selection.placeholder.id)}l.element.triggerHandler("cbselect.removing",[l,e.params.data.id,e.params.data.element])});l.container.attr("id","cbselect_"+l.element.attr("id"));if(o&&o!="0px"){l.container.css("height",o)}if(l.settings.containerCssClass){l.container.addClass(l.settings.containerCssClass)}if(l.settings.dropdownCssClass){l.dropdown.addClass(l.settings.dropdownCssClass)}l.element.on("change",function(){if(typeof cbParamChange!="undefined"){cbParamChange.call(i)}});l.element.on("remove destroy.cbselect",function(){l.element.cbselect("destroy")});l.element.on("rebind.cbselect",function(){l.element.cbselect("rebind")});l.element.on("modified.cbselect",function(e,t,s,n){if(t!=s){l.element.cbselect("rebind")}});l.element.on("cloned.cbselect",function(){e(this).off("destroy.cbselect");e(this).off("rebind.cbselect");e(this).off("cloned.cbselect");e(this).off("modified.cbselect");e(this).removeData("cbselect");if(u){e(this).removeAttr("data-cbtooltip-open-target");e(this).removeAttr("data-cbtooltip-close-target");e(this).removeAttr("data-cbtooltip-position-target");e(this).removeData("cbtooltip-open-target");e(this).removeData("cbtooltip-close-target");e(this).removeData("cbtooltip-position-target")}e(this).select2("close");e(this).removeData("select2");e(this).off(".select2");e(this).removeClass("select2-hidden-accessible");e(this).siblings(".select2-container").remove();e(this).removeAttr("tabindex");e(this).removeData("old-tabindex");e(this).show();e(this).cbselect(l.options)});l.element.triggerHandler("cbselect.init.after",[l]);l.element.data("cbselect",l);t.push(l)})},open:function(){var t=e(this).data("cbselect");if(!t){return this}t.element.select2("open");return this},close:function(t){var s=e(this).data("cbselect");if(!s){return this}s.element.select2("close");return this},get:function(){var t=e(this).data("cbselect");if(!t){return null}return t.element.val()},set:function(t){var s=e(this).data("cbselect");if(!s){return null}s.element.val(t).trigger("change");return s.element.cbselect("get")},unset:function(t){var s=e(this).data("cbselect");if(!s){return null}if(!e.isArray(t)){t=[t]}var n=s.element.cbselect("get");var i=n;var l=false;if(e.isArray(n)){e.each(t,function(e,t){if(i.indexOf(t)>-1){i.splice(i.indexOf(t),1);l=true}})}else{e.each(t,function(e,t){if(t===n){i="";l=true;return false}})}if(l){return s.element.cbselect("set",i)}else{return n}},enable:function(){var t=e(this).data("cbselect");if(!t){return this}t.element.prop("disabled",false);return this},disable:function(){var t=e(this).data("cbselect");if(!t){return this}t.element.prop("disabled",true);return this},container:function(){var t=e(this).data("cbselect");if(!t){return this}return t.container},dropdown:function(){var t=e(this).data("cbselect");if(!t){return this}return t.dropdown},rebind:function(){var t=e(this).data("cbselect");if(!t){return this}t.element.cbselect("destroy");t.element.cbselect(t.options);return this},destroy:function(){var s=e(this).data("cbselect");if(!s){return this}if(s.element.is('.cbTooltip,[data-hascbtooltip="true"]')){s.element.removeAttr("data-cbtooltip-open-target");s.element.removeAttr("data-cbtooltip-close-target");s.element.removeAttr("data-cbtooltip-position-target");s.element.removeData("cbtooltip-open-target");s.element.removeData("cbtooltip-close-target");s.element.removeData("cbtooltip-position-target")}s.element.select2("destroy");s.element.off("destroy.cbselect");s.element.off("rebind.cbselect");s.element.off("cloned.cbselect");s.element.off("modified.cbselect");e.each(t,function(e,n){if(n.element==s.element){t.splice(e,1);return false}return true});s.element.removeData("cbselect");s.element.triggerHandler("cbselect.destroyed",[s]);return this},instances:function(){return t}};function n(e){if(!e.element.children().length){e.dropdown.addClass("select2-container--empty");e.container.addClass("select2-container--empty")}else{e.dropdown.removeClass("select2-container--empty");e.container.removeClass("select2-container--empty")}}e.fn.cbselect=function(e){if(s[e]){return s[e].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof e==="object"||!e){return s.init.apply(this,arguments)}return this};e.fn.cbselect.defaults={init:true,useData:true,tags:false,separator:null,placeholder:null,closeOnSelect:true,selectOnClose:false,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,dropdownCssClass:null,containerCssClass:null,dropdownAutoWidth:true,theme:"bootstrap",width:"calculate",height:"off"}})(jQuery);