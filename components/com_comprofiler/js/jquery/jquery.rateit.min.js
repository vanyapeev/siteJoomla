(function(e){e.rateit={aria:{resetLabel:"reset rating",ratingLabel:"rating"}};e.fn.rateit=function(a,i){var r=1;var n={};var s="init";var l=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};if(this.length===0){return this}var d=e.type(a);if(d=="object"||a===undefined||a===null){n=e.extend({},e.fn.rateit.defaults,a)}else if(d=="string"&&a!=="reset"&&i===undefined){return this.data("rateit"+l(a))}else if(d=="string"){s="setvalue"}return this.each(function(){var d=e(this);var f=function(e,t){if(t!=null){var a="aria-value"+(e=="value"?"now":e);var i=d.find(".rateit-range");if(i.attr(a)!=undefined){i.attr(a,t)}}arguments[0]="rateit"+l(e);return d.data.apply(d,arguments)};if(a=="reset"){var u=f("init");for(var h in u){d.data(h,u[h])}if(f("backingfld")){var v=e(f("backingfld"));v.val(f("value"));v.trigger("change");if(v[0].min){v[0].min=f("min")}if(v[0].max){v[0].max=f("max")}if(v[0].step){v[0].step=f("step")}}d.trigger("reset")}if(!d.hasClass("rateit")){d.addClass("rateit")}var o=d.css("direction")!="rtl";if(s=="setvalue"){if(!f("init")){throw"Can't set value before init"}if(a=="readonly"&&i==true&&!f("readonly")){d.find(".rateit-range").unbind();f("wired",false)}if(a=="value"){i=i==null?f("min"):Math.max(f("min"),Math.min(f("max"),i))}if(f("backingfld")){var v=e(f("backingfld"));if(a=="value"){v.val(i)}if(a=="min"&&v[0].min){v[0].min=i}if(a=="max"&&v[0].max){v[0].max=i}if(a=="step"&&v[0].step){v[0].step=i}}f(a,i)}if(!f("init")){f("min",isNaN(f("min"))?n.min:f("min"));f("max",isNaN(f("max"))?n.max:f("max"));f("step",f("step")||n.step);f("readonly",f("readonly")!==undefined?f("readonly"):n.readonly);f("resetable",f("resetable")!==undefined?f("resetable"):n.resetable);f("backingfld",f("backingfld")||n.backingfld);f("starwidth",f("starwidth")||n.starwidth);f("starheight",f("starheight")||n.starheight);f("value",Math.max(f("min"),Math.min(f("max"),!isNaN(f("value"))?f("value"):!isNaN(n.value)?n.value:n.min)));f("ispreset",f("ispreset")!==undefined?f("ispreset"):n.ispreset);if(f("backingfld")){var v=e(f("backingfld")).hide();if(v.attr("disabled")||v.attr("readonly")){f("readonly",true)}if(v[0].nodeName=="INPUT"){if(v[0].type=="range"||v[0].type=="text"){f("min",parseInt(v.attr("min"))||f("min"));f("max",parseInt(v.attr("max"))||f("max"));f("step",parseInt(v.attr("step"))||f("step"))}}if(v[0].nodeName=="SELECT"&&v[0].options.length>1){f("min",!isNaN(f("min"))?f("min"):Number(v[0].options[0].value));f("max",Number(v[0].options[v[0].length-1].value));f("step",Number(v[0].options[1].value)-Number(v[0].options[0].value));var m=v.find("option[selected]");if(m.length==1){f("value",m.val())}}else{f("value",v.val())}}var c=d[0].nodeName=="DIV"?"div":"span";r++;var g='<button id="rateit-reset-{{index}}" type="button" data-role="none" class="rateit-reset" aria-label="'+e.rateit.aria.resetLabel+'" aria-controls="rateit-range-{{index}}"></button><{{element}} id="rateit-range-{{index}}" class="rateit-range" tabindex="0" role="slider" aria-label="'+e.rateit.aria.ratingLabel+'" aria-owns="rateit-reset-{{index}}" aria-valuemin="'+f("min")+'" aria-valuemax="'+f("max")+'" aria-valuenow="'+f("value")+'"><{{element}} class="rateit-selected" style="height:'+f("starheight")+'px"></{{element}}><{{element}} class="rateit-hover" style="height:'+f("starheight")+'px"></{{element}}></{{element}}>';d.append(g.replace(/{{index}}/gi,r).replace(/{{element}}/gi,c));if(!o){d.find(".rateit-reset").css("float","right");d.find(".rateit-selected").addClass("rateit-selected-rtl");d.find(".rateit-hover").addClass("rateit-hover-rtl")}f("init",JSON.parse(JSON.stringify(d.data())))}d.find(".rateit-selected, .rateit-hover").height(f("starheight"));var p=d.find(".rateit-range");p.width(f("starwidth")*(f("max")-f("min"))).height(f("starheight"));var b="rateit-preset"+(o?"":"-rtl");if(f("ispreset")){d.find(".rateit-selected").addClass(b)}else{d.find(".rateit-selected").removeClass(b)}if(f("value")!=null){var w=(f("value")-f("min"))*f("starwidth");d.find(".rateit-selected").width(w)}var x=d.find(".rateit-reset");if(x.data("wired")!==true){x.bind("click",function(t){t.preventDefault();x.blur();var a=e.Event("beforereset");d.trigger(a);if(a.isDefaultPrevented()){return false}d.rateit("value",null);d.trigger("reset")}).data("wired",true)}var y=function(t,a){var i=a.changedTouches?a.changedTouches[0].pageX:a.pageX;var r=i-e(t).offset().left;if(!o){r=p.width()-r}if(r>p.width()){r=p.width()}if(r<0){r=0}return w=Math.ceil(r/f("starwidth")*(1/f("step")))};var N=function(e){var t=e*f("starwidth")*f("step");var a=p.find(".rateit-hover");if(a.data("width")!=t){p.find(".rateit-selected").hide();a.width(t).show().data("width",t);var i=[e*f("step")+f("min")];d.trigger("hover",i).trigger("over",i)}};var k=function(t){var a=e.Event("beforerated");d.trigger(a,[t]);if(a.isDefaultPrevented()){return false}f("value",t);if(f("backingfld")){e(f("backingfld")).val(t).trigger("change")}if(f("ispreset")){p.find(".rateit-selected").removeClass(b);f("ispreset",false)}p.find(".rateit-hover").hide();p.find(".rateit-selected").width(t*f("starwidth")-f("min")*f("starwidth")).show();d.trigger("hover",[null]).trigger("over",[null]).trigger("rated",[t]);return true};if(!f("readonly")){if(!f("resetable")){x.hide()}if(!f("wired")){p.bind("touchmove touchend",t);p.mousemove(function(e){var t=y(this,e);N(t)});p.mouseleave(function(e){p.find(".rateit-hover").hide().width(0).data("width","");d.trigger("hover",[null]).trigger("over",[null]);p.find(".rateit-selected").show()});p.mouseup(function(e){var t=y(this,e);var a=t*f("step")+f("min");k(a);p.blur()});p.keyup(function(e){if(e.which==38||e.which==(o?39:37)){k(Math.min(f("value")+f("step"),f("max")))}if(e.which==40||e.which==(o?37:39)){k(Math.max(f("value")-f("step"),f("min")))}});f("wired",true)}if(f("resetable")){x.show()}}else{x.hide()}p.attr("aria-readonly",f("readonly"))})};function t(e){var t=e.originalEvent.changedTouches,a=t[0],i="";switch(e.type){case"touchmove":i="mousemove";break;case"touchend":i="mouseup";break;default:return}var r=document.createEvent("MouseEvent");r.initMouseEvent(i,true,true,window,1,a.screenX,a.screenY,a.clientX,a.clientY,false,false,false,false,0,null);a.target.dispatchEvent(r);e.preventDefault()}e.fn.rateit.defaults={min:0,max:5,step:.5,starwidth:16,starheight:16,readonly:false,resetable:true,ispreset:false};e(function(){e("div.rateit, span.rateit").rateit()})})(jQuery);