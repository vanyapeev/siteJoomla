(function(e){e.cluetip={version:"1.2.10",template:["<div>",'<div class="cluetip-outer">','<h3 class="cluetip-title ui-widget-header ui-cluetip-header"></h3>','<div class="cluetip-inner ui-widget-content ui-cluetip-content"></div>',"</div>",'<div class="cluetip-extra"></div>',"</div>"].join(""),setup:{insertionType:"appendTo",insertionElement:"body"},defaults:{multiple:false,width:275,height:"auto",cluezIndex:97,positionBy:"auto",topOffset:15,leftOffset:15,snapToEdge:false,local:false,localPrefix:null,localIdSuffix:null,hideLocal:true,attribute:"rel",titleAttribute:"title",splitTitle:"",escapeTitle:false,showTitle:true,cluetipClass:"default",hoverClass:"",waitImage:true,cursor:"help",arrows:false,dropShadow:true,dropShadowSteps:6,sticky:false,mouseOutClose:false,delayedClose:50,activation:"hover",clickThrough:true,tracking:false,closePosition:"top",closeText:"Close",truncate:0,fx:{open:"show",openSpeed:""},hoverIntent:{sensitivity:3,interval:50,timeout:0},onActivate:function(e){return true},onShow:function(e,t){},onHide:function(e,t){},ajaxCache:true,ajaxProcess:function(e){e=e.replace(/<(script|style|title)[^<]+<\/(script|style|title)>/gm,"").replace(/<(link|meta)[^>]+>/g,"");return e},ajaxSettings:{dataType:"html"},debug:false}};var t,i="cluetip ui-widget ui-widget-content ui-cluetip",o={},l=0,a=0;var s=function(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")};e.fn.attrProp=e.fn.prop||e.fn.attr;e.fn.cluetip=function(n,r){var u,c,p,f,d,h;if(typeof n=="object"){r=n;n=null}if(n=="destroy"){this.each(function(t){var i=e(this),o=i.data("cluetip");if(o){e(o.selector).remove();e.removeData(this,"title");e.removeData(this,"cluetip")}if(o.title){i.attrProp("title",o.title)}i.unbind(".cluetip").unbind("cluetipMoc")});if(!e('[id^="cluetip"]').length){e(document).unbind(".cluetip")}return this}r=e.extend(true,{},e.cluetip.defaults,r||{});l++;var v,m=e.cluetip.backCompat||!r.multiple?"cluetip":"cluetip-"+l,g="#"+m,b=e.cluetip.backCompat?"#":".",x=e.cluetip.setup.insertionType,w=e.cluetip.setup.insertionElement||"body";x=/appendTo|prependTo|insertBefore|insertAfter/.test(x)?x:"appendTo";u=e(g);if(!u.length){u=e(e.cluetip.template)[x](w).attr("id",m).css({position:"absolute",display:"none"});v=+r.cluezIndex;p=u.find(b+"cluetip-outer").css({position:"relative",zIndex:v});c=u.find(b+"cluetip-inner");f=u.find(b+"cluetip-title");u.bind("mouseenter mouseleave",function(t){e(this).data("entered",t.type==="mouseenter")})}t=e("#cluetip-waitimage");if(!t.length&&r.waitImage){t=e("<div></div>").attr("id","cluetip-waitimage").css({position:"absolute"});t.insertBefore(u).hide()}var y=(parseInt(u.css("paddingLeft"),10)||0)+(parseInt(u.css("paddingRight"),10)||0);this.each(function(l){var m,x=this,C=e(this),T=e.extend(true,{},r,e.metadata?C.metadata():e.meta?C.data():C.data("cluetip")||{}),k=false,j=false,B=null,z=T[T.attribute]||(T.attribute=="href"?C.attr(T.attribute):C.attrProp(T.attribute)||C.attr(T.attribute)),P=T.cluetipClass;v=+T.cluezIndex;C.data("cluetip",{title:x.title,zIndex:v,selector:g,cursor:x.style.cursor||""});if(T.arrows&&!u.find(".cluetip-arrows").length){u.append('<div class="cluetip-arrows ui-state-default"></div>')}if(!z&&!T.splitTitle&&!n){return true}if(T.local&&T.localPrefix){z=T.localPrefix+z}if(T.local&&T.hideLocal&&z){e(z+":first").hide()}var O=parseInt(T.topOffset,10),M=parseInt(T.leftOffset,10);var A,L,N=isNaN(parseInt(T.height,10))?"auto":/\D/g.test(T.height)?T.height:T.height+"px";var E,Y,H,X,D,R,W;var $=parseInt(T.width,10)||275,q=$+y+T.dropShadowSteps,Q=this.offsetWidth,U,F,G,J,K;var V;var Z=T.attribute!="title"?C.attr(T.titleAttribute)||"":"";if(T.escapeTitle){Z=s(Z)}if(T.splitTitle){V=Z.split(T.splitTitle);Z=T.showTitle||V[0]===""?V.shift():""}var _;function ee(){return false}C.bind("mouseenter mouseleave",function(e){var t=C.data("cluetip");t.entered=e.type==="entered";C.data("cluetip",t)});var te=function(i){var s,h,v,y=T.onActivate.call(x,i);if(y===false){return false}j=true;u=e(g).css({position:"absolute"});p=u.find(b+"cluetip-outer");c=u.find(b+"cluetip-inner");f=u.find(b+"cluetip-title");d=u.find(b+"cluetip-arrows");u.removeClass().css({width:$});if(z==C.attr("href")){C.css("cursor",T.cursor)}if(T.hoverClass){C.addClass(T.hoverClass)}Y=X=C.offset().top;H=Y+C.innerHeight();U=C.offset().left;if(e(w).css("position")==="relative"){U-=e(w)[0].getBoundingClientRect().left}Q=C.innerWidth();if(i.type==focus||T.positionBy=="mouse"&&!i.pageX){J=U+Q/2+M;u.css({left:F});R=X+O}else{J=i.pageX;R=i.pageY}if(x.tagName.toLowerCase()!="area"){E=e(document).scrollTop();K=e(window).width()}if(T.positionBy=="fixed"){F=Q+U+M;u.css({left:F})}else{F=Q>U&&U>q||U+Q+q+M>K?U-q-M:Q+U+M;if(x.tagName.toLowerCase()=="area"||T.positionBy=="mouse"||Q+q>K){if(J+20+q>K){u.addClass("cluetip-"+P);F=J-q-M>=0?J-q-M-parseInt(u.css("marginLeft"),10)+parseInt(c.css("marginRight"),10):J-q/2}else{F=J+M}}s=F<0?i.pageY+O:i.pageY;if(F<0||T.positionBy=="bottomTop"||T.positionBy=="topBottom"){F=J+q/2>K?K/2-q/2:Math.max(J-q/2,0)}}d.css({zIndex:C.data("cluetip").zIndex+1});u.css({left:F,zIndex:C.data("cluetip").zIndex});L=e(window).height();if(n){if(typeof n=="function"){m=n.call(x)}else{m=n}c.html(m);ie(s)}else if(V){var I=V.length;c.html(I?V[0]:"");if(I>1){for(var B=1;B<I;B++){c.append('<div class="split-body">'+V[B]+"</div>")}}ie(s)}else if(!T.local&&z.indexOf("#")!==0){if(/\.(jpe?g|tiff?|gif|png)(?:\?.*)?$/i.test(z)){c.html('<img src="'+z+'" alt="'+Z+'" />');ie(s)}else{var A=T.ajaxSettings.beforeSend,N=T.ajaxSettings.error,D=T.ajaxSettings.success,W=T.ajaxSettings.complete;v=S(z,T.ajaxSettings.data);var G={cache:T.ajaxCache,url:z,beforeSend:function(e,i){if(A){A.call(x,e,u,c,i)}p.children().empty();if(T.waitImage){t.css({top:R+20,left:J+20,zIndex:C.data("cluetip").zIndex-1}).show()}},error:function(e,t){if(r.ajaxCache&&!o[v]){o[v]={status:"error",textStatus:t,xhr:e}}if(j){if(N){N.call(x,e,t,u,c)}else{c.html("<i>sorry, the contents could not be loaded</i>")}}},success:function(e,t,i){if(r.ajaxCache&&!o[v]){o[v]={status:"success",data:e,textStatus:t,xhr:i}}k=T.ajaxProcess.call(x,e);if(typeof k=="object"&&k!==null){Z=k.title;k=k.content}if(j){if(D){D.call(x,e,t,u,c)}c.html(k)}},complete:function(i,o){if(W){W.call(x,i,o,u,c)}var l=c[0].getElementsByTagName("img");a=l.length;for(var n=0,r=l.length;n<r;n++){if(l[n].complete){a--}}if(a){e(l).bind("load.ct error.ct",function(){a--;if(a===0){t.hide();e(l).unbind(".ct");if(j){ie(s)}}})}else{t.hide();if(j){ie(s)}}}};h=e.extend(true,{},T.ajaxSettings,G);if(o[v]){ne(o[v],h)}else{e.ajax(h)}}}else if(T.local){var _=e(z+(/^#\S+$/.test(z)?"":":eq("+l+")")).clone(true).show();if(T.localIdSuffix){_.attr("id",_[0].id+T.localIdSuffix)}c.html(_);ie(s)}};C.unbind("showCluetip.cluetip",te).bind("showCluetip.cluetip",te);var ie=function(t){var o,l,a,s=Z||T.showTitle&&"&nbsp;",n="",r="",v=false;var m={bottom:function(e){e.appendTo(c)},top:function(e){e.prependTo(c)},title:function(e){e.prependTo(f)}};u.addClass("cluetip-"+P);if(T.truncate){var g=c.text().slice(0,T.truncate)+"...";c.html(g)}if(s){f.show().html(s)}else{f.hide()}if(T.sticky){if(m[T.closePosition]){o=e('<div class="cluetip-close"><a href="#">'+T.closeText+"</a></div>");m[T.closePosition](o);o.bind("click.cluetip",function(){le();return false})}if(T.mouseOutClose){C.unbind("mouseleave.cluetipMoc");u.unbind("mouseleave.cluetipMoc");if(T.mouseOutClose=="both"||T.mouseOutClose=="cluetip"||T.mouseOutClose===true){u.bind("mouseleave.cluetipMoc",ae)}if(T.mouseOutClose=="both"||T.mouseOutClose=="link"){C.bind("mouseleave.cluetipMoc",ae)}}}p.css({zIndex:C.data("cluetip").zIndex,overflow:N=="auto"?"visible":"auto",height:N});A=N=="auto"?Math.max(u.outerHeight(),u.height()):parseInt(N,10);D=X;W=E+L;v=F<J&&Math.max(F,0)+q>J;if(T.positionBy=="fixed"){D=X-T.dropShadowSteps+O}else if(T.positionBy=="topBottom"||T.positionBy=="bottomTop"||v){if(T.positionBy=="topBottom"){if(X+A+O<W&&R-E<A+O){r="bottom"}else{r="top"}}else if(T.positionBy=="bottomTop"||v){if(X+A+O>W&&R-E>A+O){r="top"}else{r="bottom"}}if(T.snapToEdge){if(r=="top"){D=Y-A-O}else if(r=="bottom"){D=H+O}}else{if(r=="top"){D=R-A-O}else if(r=="bottom"){D=R+O}}}else if(X+A+O>W){D=A>=L?E:W-A-O}else if(C.css("display")=="block"||x.tagName.toLowerCase()=="area"||T.positionBy=="mouse"){D=t-O}else{D=X-T.dropShadowSteps}if(r===""){r=F<U?"left":"right"}l=" clue-"+r+"-"+P+" cluetip-"+P;if(P=="rounded"){l+=" ui-corner-all"}u.css({top:D+"px"}).attrProp({className:i+l});if(T.arrows){if(/(left|right)/.test(r)){a=u.height()-d.height();n=F>=0&&t>0?X-D-T.dropShadowSteps:0;n=a>n?n:a;n+="px"}d.css({top:n}).show()}else{d.hide()}h=I(u,T);if(h&&h.length){h.hide().css({height:A,width:$,zIndex:C.data("cluetip").zIndex-1}).show()}if(!B){u.hide()}clearTimeout(B);B=null;u[T.fx.open](T.fx.openSpeed||0);if(e.fn.bgiframe){u.bgiframe()}T.onShow.call(x,u,c)};var oe=function(e){j=false;t.hide();if(!T.sticky||/click|toggle/.test(T.activation)){if(T.delayedClose>0){clearTimeout(B);B=null;B=setTimeout(le,T.delayedClose)}else{le();clearTimeout(B)}}if(T.hoverClass){C.removeClass(T.hoverClass)}};var le=function(t){var i=t&&t.data("cluetip")?t:C,o=i.data("cluetip")&&i.data("cluetip").selector,l=o||"div.cluetip",a=e(l),s=a.find(b+"cluetip-inner"),n=a.find(b+"cluetip-arrows");a.hide().removeClass();T.onHide.call(i[0],a,s);if(o){i.removeClass("cluetip-clicked");C.css("cursor",C.data("cluetip").cursor)}if(o&&Z){i.attrProp(T.titleAttribute,Z)}if(T.arrows){n.css({top:""})}if(h){h.hide()}};var ae=function(){var e=this;clearTimeout(B);B=setTimeout(function(){var t=C.data("cluetip").entered,i=u.data("entered"),o=false;if(T.mouseOutClose=="both"&&(t||i)){o=true}else if((T.mouseOutClose===true||T.mouseOutClose=="cluetip")&&i){o=true}else if(T.mouseOutClose=="link"&&t){o=true}if(!o){le.call(e)}},T.delayedClose)};e(document).unbind("hideCluetip.cluetip").bind("hideCluetip.cluetip",function(t){le(e(t.target))});if(/click|toggle/.test(T.activation)){C.bind("click.cluetip",function(t){if(u.is(":hidden")||!C.is(".cluetip-clicked")){te(t);e(".cluetip-clicked").removeClass("cluetip-clicked");C.addClass("cluetip-clicked")}else{oe(t)}return false})}else if(T.activation=="focus"){C.bind("focus.cluetip",function(e){C.attrProp("title","");te(e)});C.bind("blur.cluetip",function(e){C.attrProp("title",C.data("cluetip").title);oe(e)})}else{C[T.clickThrough?"unbind":"bind"]("click.cluetip",ee);var se=function(e){if(T.tracking){var t=F-e.pageX;var i=D?D-e.pageY:X-e.pageY;C.bind("mousemove.cluetip",function(e){u.css({left:e.pageX+t,top:e.pageY+i})})}};if(e.fn.hoverIntent&&T.hoverIntent){C.hoverIntent({sensitivity:T.hoverIntent.sensitivity,interval:T.hoverIntent.interval,over:function(e){te(e);se(e)},timeout:T.hoverIntent.timeout,out:function(e){oe(e);C.unbind("mousemove.cluetip")}})}else{C.bind("mouseenter.cluetip",function(e){te(e);se(e)}).bind("mouseleave.cluetip",function(e){oe(e);C.unbind("mousemove.cluetip")})}C.bind("mouseover.cluetip",function(e){C.attrProp("title","")}).bind("mouseleave.cluetip",function(e){C.attrProp("title",C.data("cluetip").title)})}function ne(e,t){var i=e.status;t.beforeSend(e.xhr,t);if(i=="error"){t[i](e.xhr,e.textStatus)}else if(i=="success"){t[i](e.data,e.textStatus,e.xhr)}t.complete(e.xhr,t.textStatus)}});function C(){}function S(t,i){var o=t||"";i=i||"";if(typeof i=="object"){e.each(i,function(e,t){o+="-"+e+"-"+t})}else if(typeof i=="string"){o+=i}return o}function I(t,i,o){var l="",a=i.dropShadow&&i.dropShadowSteps?+i.dropShadowSteps:0;if(e.cluetip.boxShadow){if(a){l="1px 1px "+a+"px rgba(0,0,0,0.5)"}var s=a===0?"0 0 ":"1px 1px ";t.css(e.cluetip.boxShadow,l);return false}var n=t.find(".cluetip-drop-shadow");if(a==n.length){return n}n.remove();var r=[];for(var u=0;u<a;){r[u++]='<div style="top:'+u+"px;left:"+u+'px;"></div>'}o=e(r.join("")).css({position:"absolute",backgroundColor:"#000",zIndex:v-1,opacity:.1}).addClass("cluetip-drop-shadow").prependTo(t);return o}return this};(function(){e.support=e.support||{};var t=document.createElement("div"),i=t.style,o=["boxShadow"],l=["moz","Moz","webkit","o"];for(var a=0,s=o.length;a<s;a++){var n=o[a],r=n.charAt(0).toUpperCase()+n.slice(1);if(typeof i[n]!=="undefined"){e.cluetip[n]=n}else{for(var u=0,c=l.length;u<c;u++){if(typeof i[l[u]+r]!=="undefined"){e.cluetip[n]=l[u]+r;break}}}if(!e.support[n]){e.support[n]=e.cluetip[n]}}t=null})();e.fn.cluetip.defaults=e.cluetip.defaults})(jQuery);