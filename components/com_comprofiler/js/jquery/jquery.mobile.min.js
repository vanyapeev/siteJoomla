(function(e,t,n){if(typeof define==="function"&&define.amd){define(["jquery"],function(i){n(i,e,t);return i.mobile})}else{n(e.jQuery,e,t)}})(this,document,function(e,t,n,i){(function(e,t,n,i){var o="virtualMouseBindings",s="virtualTouchID",a="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),r="clientX clientY pageX pageY screenX screenY".split(" "),u=e.event.mouseHooks?e.event.mouseHooks.props:[],c=e.event.props.concat(u),l={},f=0,p=0,h=0,v=false,d=[],m=false,g=false,w="addEventListener"in n,b=e(n),T=1,D=0,y,E;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};function P(e){while(e&&typeof e.originalEvent!=="undefined"){e=e.originalEvent}return e}function X(t,n){var o=t.type,s,a,u,l,f,p,h,v,d;t=e.Event(t);t.type=n;s=t.originalEvent;a=e.event.props;if(o.search(/^(mouse|click)/)>-1){a=c}if(s){for(h=a.length,l;h;){l=a[--h];t[l]=s[l]}}if(o.search(/mouse(down|up)|click/)>-1&&!t.which){t.which=1}if(o.search(/^touch/)!==-1){u=P(s);o=u.touches;f=u.changedTouches;p=o&&o.length?o[0]:f&&f.length?f[0]:i;if(p){for(v=0,d=r.length;v<d;v++){l=r[v];t[l]=p[l]}}}return t}function Y(t){var n={},i,s;while(t){i=e.data(t,o);for(s in i){if(i[s]){n[s]=n.hasVirtualBinding=true}}t=t.parentNode}return n}function k(t,n){var i;while(t){i=e.data(t,o);if(i&&(!n||i[n])){return t}t=t.parentNode}return null}function M(){g=false}function I(){g=true}function x(){D=0;d.length=0;m=false;I()}function S(){M()}function L(){O();f=setTimeout(function(){f=0;x()},e.vmouse.resetTimerDuration)}function O(){if(f){clearTimeout(f);f=0}}function B(t,n,i){var o;if(i&&i[t]||!i&&k(n.target,t)){o=X(n,t);e(n.target).trigger(o)}return o}function N(t){var n=e.data(t.target,s),i;if(!m&&(!D||D!==n)){i=B("v"+t.type,t);if(i){if(i.isDefaultPrevented()){t.preventDefault()}if(i.isPropagationStopped()){t.stopPropagation()}if(i.isImmediatePropagationStopped()){t.stopImmediatePropagation()}}}}function j(t){var n=P(t).touches,i,o,a;if(n&&n.length===1){i=t.target;o=Y(i);if(o.hasVirtualBinding){D=T++;e.data(i,s,D);O();S();v=false;a=P(t).touches[0];p=a.pageX;h=a.pageY;B("vmouseover",t,o);B("vmousedown",t,o)}}}function z(e){if(g){return}if(!v){B("vmousecancel",e,Y(e.target))}v=true;L()}function F(t){if(g){return}var n=P(t).touches[0],i=v,o=e.vmouse.moveDistanceThreshold,s=Y(t.target);v=v||(Math.abs(n.pageX-p)>o||Math.abs(n.pageY-h)>o);if(v&&!i){B("vmousecancel",t,s)}B("vmousemove",t,s);L()}function H(e){if(g){return}I();var t=Y(e.target),n,i;B("vmouseup",e,t);if(!v){n=B("vclick",e,t);if(n&&n.isDefaultPrevented()){i=P(e).changedTouches[0];d.push({touchID:D,x:i.clientX,y:i.clientY});m=true}}B("vmouseout",e,t);v=false;L()}function V(t){var n=e.data(t,o),i;if(n){for(i in n){if(n[i]){return true}}}return false}function q(){}function Q(t){var n=t.substr(1);return{setup:function(){if(!V(this)){e.data(this,o,{})}var i=e.data(this,o);i[t]=true;l[t]=(l[t]||0)+1;if(l[t]===1){b.bind(n,N)}e(this).bind(n,q);if(w){l["touchstart"]=(l["touchstart"]||0)+1;if(l["touchstart"]===1){b.bind("touchstart",j).bind("touchend",H).bind("touchmove",F).bind("scroll",z)}}},teardown:function(){--l[t];if(!l[t]){b.unbind(n,N)}if(w){--l["touchstart"];if(!l["touchstart"]){b.unbind("touchstart",j).unbind("touchmove",F).unbind("touchend",H).unbind("scroll",z)}}var i=e(this),s=e.data(this,o);if(s){s[t]=false}i.unbind(n,q);if(!V(this)){i.removeData(o)}}}}for(E=0;E<a.length;E++){e.event.special[a[E]]=Q(a[E])}if(w){n.addEventListener("click",function(t){var n=d.length,i=t.target,o,a,r,u,c,l;if(n){o=t.clientX;a=t.clientY;y=e.vmouse.clickDistanceThreshold;r=i;while(r){for(u=0;u<n;u++){c=d[u];l=0;if(r===i&&Math.abs(c.x-o)<y&&Math.abs(c.y-a)<y||e.data(r,s)===c.touchID){t.preventDefault();t.stopPropagation();return}}r=r.parentNode}}},true)}})(e,t,n);(function(e){e.mobile={}})(e);(function(e,t){var i={touch:"ontouchend"in n};e.mobile.support=e.mobile.support||{};e.extend(e.support,i);e.extend(e.mobile.support,i)})(e);(function(e,t,i){var o=e(n),s=e.mobile.support.touch,a="touchmove scroll",r=s?"touchstart":"mousedown",u=s?"touchend":"mouseup",c=s?"touchmove":"mousemove";e.each(("touchstart touchmove touchend "+"tap taphold "+"swipe swipeleft swiperight "+"scrollstart scrollstop").split(" "),function(t,n){e.fn[n]=function(e){return e?this.bind(n,e):this.trigger(n)};if(e.attrFn){e.attrFn[n]=true}});function l(t,n,o,s){var a=o.type;o.type=n;if(s){e.event.trigger(o,i,t)}else{e.event.dispatch.call(t,o)}o.type=a}e.event.special.scrollstart={enabled:true,setup:function(){var t=this,n=e(t),i,o;function s(e,n){i=n;l(t,i?"scrollstart":"scrollstop",e)}n.bind(a,function(t){if(!e.event.special.scrollstart.enabled){return}if(!i){s(t,true)}clearTimeout(o);o=setTimeout(function(){s(t,false)},50)})},teardown:function(){e(this).unbind(a)}};e.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:true,setup:function(){var t=this,n=e(t),i=false;n.bind("vmousedown",function(s){i=false;if(s.which&&s.which!==1){return false}var a=s.target,r;function u(){clearTimeout(r)}function c(){u();n.unbind("vclick",f).unbind("vmouseup",u);o.unbind("vmousecancel",c)}function f(e){c();if(!i&&a===e.target){l(t,"tap",e)}else if(i){e.preventDefault()}}n.bind("vmouseup",u).bind("vclick",f);o.bind("vmousecancel",c);r=setTimeout(function(){if(!e.event.special.tap.emitTapOnTaphold){i=true}l(t,"taphold",e.Event("taphold",{target:a}))},e.event.special.tap.tapholdThreshold)})},teardown:function(){e(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup");o.unbind("vmousecancel")}};e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var n=t.pageXOffset,i=t.pageYOffset,o=e.clientX,s=e.clientY;if(e.pageY===0&&Math.floor(s)>Math.floor(e.pageY)||e.pageX===0&&Math.floor(o)>Math.floor(e.pageX)){o=o-n;s=s-i}else if(s<e.pageY-i||o<e.pageX-n){o=e.pageX-n;s=e.pageY-i}return{x:o,y:s}},start:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,i=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[i.x,i.y],origin:e(t.target)}},stop:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,i=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[i.x,i.y]}},handleSwipe:function(t,n,i,o){if(n.time-t.time<e.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-n.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-n.coords[1])<e.event.special.swipe.verticalDistanceThreshold){var s=t.coords[0]>n.coords[0]?"swipeleft":"swiperight";l(i,"swipe",e.Event("swipe",{target:o,swipestart:t,swipestop:n}),true);l(i,s,e.Event(s,{target:o,swipestart:t,swipestop:n}),true);return true}return false},eventInProgress:false,setup:function(){var t,n=this,i=e(n),s={};t=e.data(this,"mobile-events");if(!t){t={length:0};e.data(this,"mobile-events",t)}t.length++;t.swipe=s;s.start=function(t){if(e.event.special.swipe.eventInProgress){return}e.event.special.swipe.eventInProgress=true;var i,a=e.event.special.swipe.start(t),r=t.target,l=false;s.move=function(t){if(!a||t.isDefaultPrevented()){return}i=e.event.special.swipe.stop(t);if(!l){l=e.event.special.swipe.handleSwipe(a,i,n,r);if(l){e.event.special.swipe.eventInProgress=false}}if(Math.abs(a.coords[0]-i.coords[0])>e.event.special.swipe.scrollSupressionThreshold){t.preventDefault()}};s.stop=function(){l=true;e.event.special.swipe.eventInProgress=false;o.off(c,s.move);s.move=null};o.on(c,s.move).one(u,s.stop)};i.on(r,s.start)},teardown:function(){var t,n;t=e.data(this,"mobile-events");if(t){n=t.swipe;delete t.swipe;t.length--;if(t.length===0){e.removeData(this,"mobile-events")}}if(n){if(n.start){e(this).off(r,n.start)}if(n.move){o.off(c,n.move)}if(n.stop){o.off(u,n.stop)}}}};e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(t,n){e.event.special[t]={setup:function(){e(this).bind(n,e.noop)},teardown:function(){e(this).unbind(n)}}})})(e,this)});