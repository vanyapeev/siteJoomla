if(window.jQuery)(function(t){if(!t.support.opacity&&!t.support.style)try{document.execCommand("BackgroundImageCache",false,true)}catch(t){}t.fn.rating=function(a){if(this.length==0)return this;if(typeof arguments[0]=="string"){if(this.length>1){var i=arguments;return this.each(function(){t.fn.rating.apply(t(this),i)})}t.fn.rating[arguments[0]].apply(this,t.makeArray(arguments).slice(1)||[]);return this}var a=t.extend({},t.fn.rating.options,a||{});t.fn.rating.calls++;this.not(".star-rating-applied").addClass("star-rating-applied").each(function(){var i,r=t(this);var n=(this.name||"unnamed-rating").replace(/\[|\]/g,"_").replace(/^\_+|\_+$/g,"");var e=t(this.form||document.body);var s=e.data("rating");if(!s||s.call!=t.fn.rating.calls)s={count:0,call:t.fn.rating.calls};var l=s[n]||e.data("rating"+n);if(l)i=l.data("rating");if(l&&i)i.count++;else{i=t.extend({},a||{},(t.metadata?r.metadata():t.meta?r.data():null)||{},{count:0,stars:[],inputs:[]});i.serial=s.count++;l=t('<span class="star-rating-control"/>');r.before(l);l.addClass("rating-to-be-drawn");if(r.attr("disabled")||r.hasClass("disabled"))i.readOnly=true;if(r.hasClass("required"))i.required=true;l.append(i.cancel=t('<div class="rating-cancel"><a title="'+i.cancel+'">'+i.cancelValue+"</a></div>").on("mouseover",function(){t(this).rating("drain");t(this).addClass("star-rating-hover")}).on("mouseout",function(){t(this).rating("draw");t(this).removeClass("star-rating-hover")}).on("click",function(){t(this).rating("select")}).data("rating",i))}var d=t('<div role="text" aria-label="'+this.title+'" class="star-rating rater-'+i.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>");l.append(d);if(this.id)d.attr("id",this.id);if(this.className)d.addClass(this.className);if(i.half)i.split=2;if(typeof i.split=="number"&&i.split>0){var u=(t.fn.width?d.width():0)||i.starWidth;var c=i.count%i.split,h=Math.floor(u/i.split);d.width(h).find("a").css({"margin-left":"-"+c*h+"px"})}if(i.readOnly)d.addClass("star-rating-readonly");else d.addClass("star-rating-live").on("mouseover",function(){t(this).rating("fill");t(this).rating("focus")}).on("mouseout",function(){t(this).rating("draw");t(this).rating("blur")}).on("click",function(){t(this).rating("select")});if(this.checked)i.current=d;if(this.nodeName=="A"){if(t(this).hasClass("selected"))i.current=d}r.hide();r.on("change.rating",function(a){if(a.selfTriggered)return false;t(this).rating("select")});d.data("rating.input",r.data("rating.star",d));i.stars[i.stars.length]=d[0];i.inputs[i.inputs.length]=r[0];i.rater=s[n]=l;i.context=e;r.data("rating",i);l.data("rating",i);d.data("rating",i);e.data("rating",s);e.data("rating"+n,l)});t(".rating-to-be-drawn").rating("draw").removeClass("rating-to-be-drawn");return this};t.extend(t.fn.rating,{calls:0,focus:function(){var a=this.data("rating");if(!a)return this;if(!a.focus)return this;var i=t(this).data("rating.input")||t(this.tagName=="INPUT"?this:null);if(a.focus)a.focus.apply(i[0],[i.val(),t("a",i.data("rating.star"))[0]])},blur:function(){var a=this.data("rating");if(!a)return this;if(!a.blur)return this;var i=t(this).data("rating.input")||t(this.tagName=="INPUT"?this:null);if(a.blur)a.blur.apply(i[0],[i.val(),t("a",i.data("rating.star"))[0]])},fill:function(){var t=this.data("rating");if(!t)return this;if(t.readOnly)return;this.rating("drain");this.prevAll().addBack().filter(".rater-"+t.serial).addClass("star-rating-hover")},drain:function(){var t=this.data("rating");if(!t)return this;if(t.readOnly)return;t.rater.children().filter(".rater-"+t.serial).removeClass("star-rating-on").removeClass("star-rating-hover")},draw:function(){var a=this.data("rating");if(!a)return this;this.rating("drain");var i=t(a.current);var r=i.length?i.prevAll().addBack().filter(".rater-"+a.serial):null;if(r)r.addClass("star-rating-on");a.cancel[a.readOnly||a.required?"hide":"show"]();this.siblings()[a.readOnly?"addClass":"removeClass"]("star-rating-readonly")},select:function(a,i){var r=this.data("rating");if(!r)return this;if(r.readOnly)return;r.current=null;if(typeof a!="undefined"||this.length>1){if(typeof a=="number")return t(r.stars[a]).rating("select",undefined,i);if(typeof a=="string"){t.each(r.stars,function(){if(t(this).data("rating.input").val()==a)t(this).rating("select",undefined,i)});return this}}else{r.current=this[0].tagName=="INPUT"?this.data("rating.star"):this.is(".rater-"+r.serial)?this:null}this.data("rating",r);this.rating("draw");var n=t(r.current?r.current.data("rating.input"):null);var e=t(r.inputs).filter(":checked");var s=t(r.inputs).not(n);s.prop("checked",false);n.prop("checked",true);t(n.length?n:e).trigger({type:"change",selfTriggered:true});if((i||i==undefined)&&r.callback)r.callback.apply(n[0],[n.val(),t("a",r.current)[0]]);return this},readOnly:function(a,i){var r=this.data("rating");if(!r)return this;r.readOnly=a||a==undefined?true:false;if(i)t(r.inputs).attr("disabled","disabled");else t(r.inputs).removeAttr("disabled");this.data("rating",r);this.rating("draw")},disable:function(){this.rating("readOnly",true,true)},enable:function(){this.rating("readOnly",false,false)}});t.fn.rating.options={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16};t(function(){t("input[type=radio].star").rating()})})(jQuery);