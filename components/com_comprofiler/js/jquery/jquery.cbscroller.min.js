(function(e){var t=[];var l={init:function(l){return this.each(function(){var n=this;var s=e(n).data("cbscroller");if(s){return}s={};s.options=typeof l!="undefined"?l:{};s.defaults=e.fn.cbscroller.defaults;s.settings=e.extend(true,{},s.defaults,s.options);s.element=e(n);if(s.settings.useData){e.each(s.defaults,function(e,t){if(e!="init"&&e!="useData"){var l=s.element.data("cbscroller"+e.charAt(0).toUpperCase()+e.slice(1));if(typeof l!="undefined"){s.settings[e]=l}else{l=s.element.data("cbscroller"+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());if(typeof l!="undefined"){s.settings[e]=l}}}})}s.element.triggerHandler("cbscroller.init.before",[s]);if(!s.settings.init){return}s.resizeHandler=function(){r.call(n,s)};e(window).on("resize",s.resizeHandler);if(s.settings.width){s.leftHandler=function(e){e.preventDefault();i.call(n,"left",s)};s.rightHandler=function(e){e.preventDefault();i.call(n,"right",s)};s.element.children(".cbScrollerLeft").on("click",s.leftHandler);s.element.children(".cbScrollerRight").on("click",s.rightHandler)}if(s.settings.height){s.upHandler=function(e){e.preventDefault();i.call(n,"up",s)};s.downHandler=function(e){e.preventDefault();i.call(n,"down",s)};s.element.children(".cbScrollerUp").on("click",s.upHandler);s.element.children(".cbScrollerDown").on("click",s.downHandler)}r.call(n,s);s.element.on("remove destroy.cbscroller",function(){s.element.cbscroller("destroy")});s.element.on("rebind.cbscroller",function(){s.element.cbscroller("rebind")});s.element.on("modified.cbscroller",function(e,t,l,r){if(t!=l){s.element.cbscroller("rebind")}});s.element.on("cloned.cbscroller",function(){e(this).off("destroy.cbscroller");e(this).off("rebind.cbscroller");e(this).off("modified.cbscroller");e(this).off("cloned.cbscroller");e(this).removeData("cbscroller");if(s.settings.width){e(this).children(".cbScrollerLeft").off("click",s.leftHandler).addClass("hidden");e(this).children(".cbScrollerRight").off("click",s.rightHandler).addClass("hidden")}if(s.settings.height){e(this).children(".cbScrollerUp").off("click",s.upHandler).addClass("hidden");e(this).children(".cbScrollerDown").off("click",s.downHandler).addClass("hidden")}e(this).removeClass("cbScrollerWidth cbScrollerHeight");e(this).cbscroller(s.options)});s.element.triggerHandler("cbscroller.init.after",[s]);s.element.data("cbscroller",s);t.push(s)})},update:function(){var t=e(this).data("cbscroller");if(!t){return this}r.call(this,t);return this},left:function(){var t=e(this).data("cbscroller");if(!t||!t.settings.width){return this}i.call(this,"left",t);return this},right:function(){var t=e(this).data("cbscroller");if(!t||!t.settings.width){return this}i.call(this,"right",t);return this},up:function(){var t=e(this).data("cbscroller");if(!t||!t.settings.height){return this}i.call(this,"up",t);return this},down:function(){var t=e(this).data("cbscroller");if(!t||!t.settings.height){return this}i.call(this,"down",t);return this},rebind:function(){var t=e(this).data("cbscroller");if(!t){return this}t.element.cbscroller("destroy");t.element.cbscroller(t.options);return this},destroy:function(){var t=e(this).data("cbscroller");if(!t){return this}t.element.off("destroy.cbscroller");t.element.off("rebind.cbscroller");t.element.off("modified.cbscroller");t.element.off("cloned.cbscroller");e(window).off("resize",t.resizeHandler);if(t.settings.width){t.element.children(".cbScrollerLeft").off("click",t.leftHandler).addClass("hidden");t.element.children(".cbScrollerRight").off("click",t.rightHandler).addClass("hidden")}if(t.settings.height){t.element.children(".cbScrollerUp").off("click",t.upHandler).addClass("hidden");t.element.children(".cbScrollerDown").off("click",t.downHandler).addClass("hidden")}t.element.removeClass("cbScrollerWidth cbScrollerHeight");t.element.removeData("cbscroller");t.element.triggerHandler("cbscroller.destroyed",[t]);return this},instances:function(){return t}};function r(t){t.element.removeClass("cbScrollerWidth cbScrollerHeight");var l=t.element.children(".cbScrollerContent");var r=0;var i=0;var n=l.children();if(t.settings.elements){n=n.find(t.settings.elements)}if(t.settings.ignore){n=n.not(t.settings.ignore)}n.each(function(){r+=e(this).width();i+=e(this).height()});if(t.settings.width){var s=t.element.children(".cbScrollerLeft").addClass("hidden");var c=t.element.children(".cbScrollerRight").addClass("hidden");if(r>l.width()){t.element.addClass("cbScrollerWidth");s.removeClass("hidden");c.removeClass("hidden")}}if(t.settings.height){var o=t.element.children(".cbScrollerUp").addClass("hidden");var a=t.element.children(".cbScrollerDown").addClass("hidden");if(i>l.height()){t.element.addClass("cbScrollerHeight");o.removeClass("hidden");a.removeClass("hidden")}}}function i(t,l){if((t=="left"||t=="right")&&!l.settings.width){return}else if((t=="up"||t=="down")&&!l.settings.height){return}var r=l.element.children(".cbScrollerContent");var i=0;var n=0;var s=null;var c=r.children();if(l.settings.elements){c=c.find(l.settings.elements)}if(l.settings.ignore){c=c.not(l.settings.ignore)}c.each(function(){i+=e(this).width();n+=e(this).height()});c.each(function(){switch(t){case"left":if(e(this).offset().left<r.offset().left){s=e(this)}break;case"right":if(e(this).offset().left+e(this).width()>r.offset().left+r.width()){s=e(this);return false}break;case"up":if(e(this).offset().top<r.offset().top){s=e(this)}break;case"down":if(e(this).offset().top+e(this).height()>r.offset().top+r.height()){s=e(this);return false}break}});if(t=="left"||t=="right"){if(s){r.scrollTo(s,"fast",{axis:"x",easing:"linear"})}else{if(l.settings.loop){var o=i;if(t=="right"){o=0}r.scrollTo(o,0,{axis:"x",easing:"linear"})}else{var a=0;if(t=="right"){a=i}r.scrollTo(a,"fast",{axis:"x",easing:"linear"})}}}else if(t=="up"||t=="down"){if(s){r.scrollTo(s,"fast",{axis:"y",easing:"linear"})}else{if(l.settings.loop){var d=n;if(t=="down"){d=0}r.scrollTo(d,0,{axis:"x",easing:"linear"})}else{var f=0;if(t=="down"){f=n}r.scrollTo(f,"fast",{axis:"y",easing:"linear"})}}}}e.fn.cbscroller=function(e){if(l[e]){return l[e].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof e==="object"||!e){return l.init.apply(this,arguments)}return this};e.fn.cbscroller.defaults={init:true,useData:true,elements:null,ignore:null,width:true,height:true,loop:false}})(jQuery);