(function(e){var t=[];var a={init:function(a){return this.each(function(){var s=this;var r=e(s).data("cbtabs");if(r){return}r={};r.options=typeof a!="undefined"?a:{};r.defaults=e.fn.cbtabs.defaults;r.settings=e.extend(true,{},r.defaults,r.options);r.element=e(s);r.tabs=[];if(r.settings.useData){e.each(r.defaults,function(e,t){if(e!="init"&&e!="useData"){var a=r.element.data("cbtabs"+e.charAt(0).toUpperCase()+e.slice(1));if(typeof a!="undefined"){r.settings[e]=a}else{a=r.element.data("cbtabs"+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());if(typeof a!="undefined"){r.settings[e]=a}}}})}r.element.triggerHandler("cbtabs.init.before",[r]);if(!r.settings.init){return}var l=null;if(r.settings.useCookies){l=document.cookie.match(new RegExp(r.element.attr("id")+"=([^;]+)"))}r.tabsNav=r.element.find(".cbTabsNav:first");r.tabsContent=r.element.find(".cbTabsContent:first");r.tabPanes=r.tabsContent.children(".cbTabPane");r.tabNavs=r.tabPanes.children(".cbTabNav");r.tabNavsPrevious=r.tabPanes.find(".cbTabNavPrevious");r.tabNavsNext=r.tabPanes.find(".cbTabNavNext");r.tabNavs.each(function(t){var a=e(e(this)[0].outerHTML.replace(/h2/,"li")).appendTo(r.tabsNav);var n=e(this).parent();var i={tabNav:a,tabPane:n,tabIndex:t+1};r.tabs.push(i);e(this).remove();a.children("a").on("click",function(e,t,s){e.preventDefault();if(typeof s=="undefined"){s=e}if(!a.hasClass("disabled")&&(!r.settings.stepByStep||t===true)){r.tabNavs.removeClass("active");r.tabPanes.removeClass("active");a.addClass("active");n.addClass("active");if(r.settings.useCookies){var l=new Date;l.setTime(l.getTime()+24*60*60*1e3);document.cookie=r.element.attr("id")+"="+a.attr("id")+"; expires="+l.toGMTString()+"; path=/"}r.element.triggerHandler("cbtabs.selected",[s,r,i])}});if(e.trim(n.html())==""){i.tabNav.addClass("disabled hidden").removeClass("active");i.tabPane.addClass("disabled hidden").removeClass("active")}});r.tabNavs=r.tabsNav.children(".cbTabNav");if(!r.tabNavs.length||r.tabNavs.filter(".disabled").length==r.tabNavs.length){var b=r.element.parent();if(b.hasClass("cbTabPane")){if(!r.element.siblings().length){b.closest(".cbTabs").cbtabs("hide",b.attr("id"))}}}r.prevHandler=function(t){t.preventDefault();var a=e(this).closest(".cbTabPane");var i=n.call(s,a.attr("id"));if(i){var l=i.tabNav.prevAll(":not(.disabled)").first();if(!l.length){l=i.tabNav.nextAll(":not(.disabled)").last()}if(l.length){l.children("a").trigger("click",[true,t]);l[0].scrollIntoView();r.element.triggerHandler("cbtabs.previous",[t,r,i,n.call(s,l.attr("id"))])}}};r.tabNavsPrevious.on("click",r.prevHandler);r.nextHandler=function(t){t.preventDefault();var a=e(this).closest(".cbTabPane");var i=n.call(s,a.attr("id"));if(i){var l=i.tabNav.nextAll(":not(.disabled)").first();if(!l.length){l=i.tabNav.prevAll(":not(.disabled)").last()}if(l.length){var b=r.element.closest("form");if(b.length){var d=b.data("cbvalidate");if(d){if(!d.element.cbvalidate("validate",a,true)){return}}}l.children("a").trigger("click",[true,t]);l[0].scrollIntoView();r.element.triggerHandler("cbtabs.next",[t,r,i,n.call(s,l.attr("id"))])}}};r.tabNavsNext.on("click",r.nextHandler);if(r.settings.stepByStep){r.tabPanes.not(".disabled").first().find(".cbTabNavPrevious").addClass("hidden");var d=r.element.closest("form");var c=r.tabPanes.not(".disabled").last().find(".cbTabNavNext");c.addClass("hidden");if(d.length){var f=d.find('input[type="submit"]:first');f.appendTo(c.parent())}}r.element.on("remove destroy.cbtabs",function(){r.element.cbtabs("destroy")});r.element.on("rebind.cbtabs",function(){r.element.cbtabs("rebind")});r.element.on("modified.cbtabs",function(e,t,a,n){if(t!=a){r.element.cbtabs("rebind")}});r.element.bind("cloned.cbtabs",function(){e(this).off("destroy.cbtabs");e(this).off("rebind.cbtabs");e(this).off("cloned.cbtabs");e(this).off("modified.cbtabs");e(this).removeData("cbtabs");var t=e(this).find(".cbTabsNav:first");var a=e(this).find(".cbTabsContent:first");var n=a.children(".cbTabPane");var i=t.children(".cbTabNav");var s=n.find(".cbTabNavPrevious");var l=n.find(".cbTabNavNext");i.each(function(t){var n=e(this).children("a").attr("href");e(this).removeClass("disabled hidden active");e(e(this)[0].outerHTML.replace(/li/,"h2")).prependTo(a.find(n));e(this).remove()});s.off("click",r.prevHandler);l.off("click",r.nextHandler);e(this).cbtabs(r.options)});r.element.triggerHandler("cbtabs.init.after",[r]);r.element.data("cbtabs",r);t.push(r);if(l){i.call(s,n.call(s,l[1]),false)}if(r.settings.tabSelected){i.call(s,n.call(s,r.settings.tabSelected))}if(!r.tabNavs.is(".active")){r.tabNavs.not(".disabled").first().children("a").trigger("click",[true])}})},selected:function(){var t=e(this).data("cbtabs");if(!t){return false}var a=false;e.each(t.tabs,function(e,t){if(t.tabNav.hasClass("active")){a=t}});return a},select:function(e){if(typeof e=="undefined"){e=null}return i.call(this,n.call(this,e))},disable:function(e){if(typeof e=="undefined"){e=null}return s.call(this,n.call(this,e))},enable:function(e){if(typeof e=="undefined"){e=null}return r.call(this,n.call(this,e))},hide:function(e){if(typeof e=="undefined"){e=null}return l.call(this,n.call(this,e))},show:function(e){if(typeof e=="undefined"){e=null}return b.call(this,n.call(this,e))},rebind:function(){var t=e(this).data("cbtabs");if(!t){return this}t.element.cbtabs("destroy");t.element.cbtabs(t.options);return this},destroy:function(){var a=e(this).data("cbtabs");if(!a){return this}e.each(a.tabs,function(t,a){a.tabNav.removeClass("disabled hidden active");a.tabPane.removeClass("disabled hidden active");e(a.tabNav[0].outerHTML.replace(/li/,"h2")).prependTo(a.tabPane);a.tabNav.remove()});a.tabNavsPrevious.off("click",a.prevHandler);a.tabNavsNext.off("click",a.nextHandler);a.element.off("destroy.cbtabs");a.element.off("rebind.cbtabs");a.element.off("cloned.cbtabs");a.element.off("modified.cbtabs");e.each(t,function(e,n){if(n.element==a.element){t.splice(e,1);return false}return true});a.element.removeData("cbtabs");a.element.triggerHandler("cbtabs.destroyed",[a]);return this},instances:function(){return t}};function n(t){if(!t){return null}var a=e(this).data("cbtabs");if(!a){return null}var n=null;e.each(a.tabs,function(e,a){if(t==a.tabNav.text()||t==a.tabNav.attr("id")||t==a.tabPane.attr("id")||"cbtabnav"+t==a.tabNav.attr("id")||"cbtabpane"+t==a.tabPane.attr("id")){n=a;return false}return true});return n}function i(t,a){if(!t){return false}var n=e(this).data("cbtabs");if(!n){return false}var i=false;if(typeof a=="undefined"){a=true}if(t){if(!t.tabNav.hasClass("disabled")){i=true;t.tabNav.children("a").trigger("click",[true]);if(a){t.tabNav.parents(".cbTabPane").each(function(){e("#"+e(this).attr("id").replace(/cbtabpane/,"cbtabnav")).children("a").trigger("click",[true])})}}}return i}function s(t){if(!t){return false}var a=e(this).data("cbtabs");if(!a){return false}var n=false;if(t){n=true;t.tabNav.addClass("disabled");t.tabPane.addClass("disabled");if(a.settings.stepByStep){a.tabPanes.find(".cbTabNavPrevious.hidden").removeClass("hidden");a.tabPanes.find(".cbTabNavNext.hidden").removeClass("hidden");a.tabPanes.not(".disabled").first().find(".cbTabNavPrevious").addClass("hidden");var i=a.element.closest("form");var s=a.tabPanes.not(".disabled").last().find(".cbTabNavNext");s.addClass("hidden");if(i.length){var r=i.find('input[type="submit"]:first');r.appendTo(s.parent())}}if(t.tabNav.hasClass("active")){a.tabNavs.not(".disabled").first().children("a").trigger("click",[true])}e(this).triggerHandler("cbtabs.disable",[a,t])}return n}function r(t){if(!t){return false}var a=e(this).data("cbtabs");if(!a){return false}var n=false;if(t){n=true;t.tabNav.removeClass("disabled");t.tabPane.removeClass("disabled");if(a.settings.stepByStep){a.tabPanes.find(".cbTabNavPrevious.hidden").removeClass("hidden");a.tabPanes.find(".cbTabNavNext.hidden").removeClass("hidden");a.tabPanes.not(".disabled").first().find(".cbTabNavPrevious").addClass("hidden");var i=a.element.closest("form");var s=a.tabPanes.not(".disabled").last().find(".cbTabNavNext");s.addClass("hidden");if(i.length){var r=i.find('input[type="submit"]:first');r.appendTo(s.parent())}}e(this).triggerHandler("cbtabs.enable",[a,t])}return n}function l(t){if(!t){return false}var a=e(this).data("cbtabs");if(!a){return false}if(s.call(this,t)){t.tabNav.addClass("hidden");e(this).triggerHandler("cbtabs.hide",[a,t]);return true}return false}function b(t){if(!t){return false}var a=e(this).data("cbtabs");if(!a){return false}if(r.call(this,t)){t.tabNav.removeClass("hidden");e(this).triggerHandler("cbtabs.show",[a,t]);return true}return false}e.fn.cbtabs=function(e){if(a[e]){return a[e].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof e==="object"||!e){return a.init.apply(this,arguments)}return this};e.fn.cbtabs.defaults={init:true,useData:true,useCookies:true,stepByStep:false,tabSelected:null};e(document).on("click",".cbTabNavExternal",function(a){a.preventDefault();var s=e(this).data("tab");if(typeof s!="undefined"){e.each(t,function(e,t){var a=n.call(t.element[0],s);if(a){i.call(t.element[0],a);return false}return true})}})})(jQuery);