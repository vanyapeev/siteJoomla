(function($){var instances=[];var methods={init:function(e){return this.each(function(){var i=this;var t={};t.options=e;t.defaults=$.fn.cbcondition.defaults;t.settings=$.extend(true,{},t.defaults,t.options);t.element=$(i);if(i!=window&&t.settings.useData){$.each(t.defaults,function(e,i){if(e!="init"&&e!="useData"){var n=t.element.data("cbcondition"+e.charAt(0).toUpperCase()+e.slice(1));if(typeof n!="undefined"){t.settings[e]=n}else{n=t.element.data("cbcondition"+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());if(typeof n!="undefined"){t.settings[e]=n}}}})}t.element.triggerHandler("cbcondition.init.before",[t]);if(!t.settings.init){return}if(!$.isArray(t.settings.conditions)){t.settings.conditions=[]}if(!$.isArray(t.settings.show)){t.settings.show=[]}if(!$.isArray(t.settings.hide)){t.settings.hide=[]}t.changeHandler=function(){conditionElement.call(this,t)};t.element.each(function(){if(this!=window){var e=null;if($(this).is("input")||$(this).is("select")||$(this).is("textarea")){e=$(this)}else{e=$(this).find("input,select,textarea").first();if(e.is(":checkbox")||e.is(":radio")){e=$(this).find('input[name="'+e.attr("name")+'"]')}}e.on("keyup change condition",t.changeHandler)}});conditionElement.call(this,t);if(i!=window){t.element.on("remove destroy.cbcondition",function(){t.element.cbcondition("destroy")});t.element.on("rebind.cbcondition",function(){t.element.cbcondition("rebind")});t.element.on("modified.cbcondition",function(e,i,n,s){if(i!=n){t.element.cbcondition("destroy");t.element.cbcondition(t.options)}});t.element.on("cloned.cbcondition",function(e,i){$(this).off("destroy.cbcondition");$(this).off("rebind.cbcondition");$(this).off("cloned.cbcondition");$(this).off("modified.cbcondition");$(this).removeData("cbconditions");var n=null;if($(this).is("input")||$(this).is("select")||$(this).is("textarea")){n=$(this)}else{n=$(this).find("input,select,textarea").first();if(n.is(":checkbox")||n.is(":radio")){n=$(this).find('input[name="'+n.attr("name")+'"]')}}n.off("keyup change condition",t.changeHandler);$(this).cbcondition(t.options)})}t.element.triggerHandler("cbcondition.init.after",[t]);if(i!=window){var n=t.element.data("cbconditions");if(!$.isArray(n)){n=[]}n.push(t);t.element.data("cbconditions",n)}instances.push(t)})},rebind:function(){var e=$(this).data("cbconditions");if(!e){return this}$.each(e,function(){var e=this;e.element.cbcondition("destroy");e.element.cbcondition(e.options)});return this},destroy:function(){var e=$(this).data("cbconditions");if(!e){return false}$.each(e,function(){var e=this;e.element.off("destroy.cbcondition");e.element.off("rebind.cbcondition");e.element.off("cloned.cbcondition");e.element.off("modified.cbcondition");e.element.each(function(){if(this==window){return}var i=null;if($(this).is("input")||$(this).is("select")||$(this).is("textarea")){i=$(this)}else{i=$(this).find("input,select,textarea").first();if(i.is(":checkbox")||i.is(":radio")){i=$(this).find('input[name="'+i.attr("name")+'"]')}}i.off("keyup change condition",e.changeHandler)});$.each(instances,function(i,t){if(t.element==e.element){instances.splice(i,1);return false}return true});revertCondition.call(e,e);e.element.removeData("cbcondition");e.element.triggerHandler("cbcondition.destroyed",[e])});return true},instances:function(){return instances}};function revertCondition(e){var i=this.jquery?this:$(this);var t=e.settings.show;var n=e.settings.hide;if(!$.isArray(t)){t=[]}if(!$.isArray(n)){n=[]}$.each(t,function(t,n){showElement.call(i,e,$(n))});$.each(n,function(t,n){showElement.call(i,e,$(n))})}function conditionElement(e,i){var t=this.jquery?this:$(this);var n=e.settings.conditions;if(!$.isArray(n)){n=[]}var s=false;if(typeof i=="undefined"){$.each(n,function(i,n){if(!$.isArray(n)){n=[]}var a=true;$.each(n,function(n,s){var c=s.element;var l=s.input;var o=t;if(typeof c!="undefined"){c=c.jquery?c:$(c);if(c.is("input")||c.is("select")||c.is("textarea")){o=c}else{o=c.find("input,select,textarea").first();if(o.is(":checkbox")||o.is(":radio")){o=c.find('input[name="'+o.attr("name")+'"]')}}}if(o.is("input")||o.is("select")||o.is("textarea")){if(o.is('input[type="checkbox"]')||o.is('input[type="radio"]')){l=[];o.each(function(){if($(this).is(":checked")){l.push($(this).val())}})}else if(o.is("select[multiple]")){l=o.val();if(l&&!$.isArray(l)){l=l.split(",")}}else{l=o.val()}}var r=matchCondition.call(o,e,l,s.operator,s.value,s.delimiter);if(a){a=r}if(e.settings.debug){console.log({orIndex:i+1,andIndex:n+1,element:c,target:o,input:l,operator:s.operator,value:s.value,delimiter:s.delimiter,matched:r})}});if(!s&&a){s=true}})}else{s=i}if(s){$.each(e.settings.show,function(i,n){showElement.call(t,e,$(n))});$.each(e.settings.hide,function(i,n){hideElement.call(t,e,$(n))});e.element.triggerHandler("cbcondition.match.true",[e])}else{$.each(e.settings.show,function(i,n){hideElement.call(t,e,$(n))});$.each(e.settings.hide,function(i,n){showElement.call(t,e,$(n))});e.element.triggerHandler("cbcondition.match.false",[e])}$.each($.extend(e.settings.show,e.settings.hide),function(e,i){var t=$(i);if(t.is("input")||t.is("select")||t.is("textarea")||t.is("option")){t.triggerHandler("condition")}else{t.find("input,select,textarea").triggerHandler("condition")}})}function showElement(e,i){if(i.length&&i.hasClass("cbDisplayDisabled")&&!i.parents(".cbDisplayDisabled").length){if(i.hasClass("cbTabPane")){var t=i.closest(".cbTabs");if(t.data("cbtabs")){t.cbtabs("show",i.attr("id"))}}else if(i.is('input[type="checkbox"]')||i.is('input[type="radio"]')){if(i.closest(".cbSingleCntrl").length){i.closest(".cbSingleCntrl").removeClass("cbDisplayDisabled hidden")}else if(i.closest(".cbSnglCtrlLbl").length){i.closest(".cbSnglCtrlLbl").removeClass("cbDisplayDisabled hidden")}else if(i.parent("label").length){i.parent("label").removeClass("cbDisplayDisabled hidden")}}if(i.is("input")||i.is("select")||i.is("textarea")){i.removeClass("cbValidationDisabled")}else if(i.is("option")){i.prop("disabled",false)}else{i.find("input,select,textarea").removeClass("cbValidationDisabled")}i.removeClass("cbDisplayDisabled hidden");e.element.triggerHandler("cbcondition.show",[e,i])}}function hideElement(e,i){if(i.length&&!i.hasClass("cbDisplayDisabled")&&!i.parents(".cbDisplayDisabled").length){if(i.hasClass("cbTabPane")){var t=i.closest(".cbTabs");if(t.data("cbtabs")){t.cbtabs("hide",i.attr("id"))}}else if(i.is('input[type="checkbox"]')||i.is('input[type="radio"]')){if(i.closest(".cbSingleCntrl").length){i.closest(".cbSingleCntrl").addClass("cbDisplayDisabled hidden")}else if(i.closest(".cbSnglCtrlLbl").length){i.closest(".cbSnglCtrlLbl").addClass("cbDisplayDisabled hidden")}else if(i.parent("label").length){i.parent("label").addClass("cbDisplayDisabled hidden")}}if(i.is("input")||i.is("select")||i.is("textarea")){if(e.settings.reset){if(i.is('input[type="checkbox"]')||i.is('input[type="radio"]')){i.prop("checked",false)}else if(!i.is('input[type="hidden"]')){i.val("")}}i.addClass("cbValidationDisabled")}else if(i.is("option")){if(e.settings.reset){i.prop("selected",false)}i.prop("disabled",true)}else{var n=i.find("input,select,textarea");if(e.settings.reset){n.each(function(){if($(this).is('input[type="checkbox"]')||$(this).is('input[type="radio"]')){$(this).prop("checked",false)}else if(!$(this).is('input[type="hidden"]')){$(this).val("")}})}n.addClass("cbValidationDisabled")}i.addClass("cbDisplayDisabled hidden");e.element.triggerHandler("cbcondition.hide",[e,i])}}function matchCondition(cbcondition,input,operator,value,delimiter){if($.isArray(value)){value=value.join("|*|")}if($.isArray(input)){input=input.join("|*|")}input=$.trim(input);value=$.trim(value);var match=false;switch(operator){case"!=":case"<>":case 1:match=input!=value;break;case">":case 2:match=input>value;break;case"<":case 3:match=input<value;break;case">=":case 4:match=input>=value;break;case"<=":case 5:match=input<=value;break;case"empty":case 6:match=!input.length;break;case"!empty":case 7:match=input.length;break;case"contain":case 8:if(delimiter){match=input.split(delimiter).indexOf(value)!=-1}else{if(input===""){return matchCondition(cbcondition,input,0,value,delimiter)}match=input.indexOf(value)!=-1}break;case"!contain":case 9:if(delimiter){match=input.split(delimiter).indexOf(value)==-1}else{if(input===""){return matchCondition(cbcondition,input,1,value,delimiter)}match=input.indexOf(value)==-1}break;case"regexp":case 10:if(value===""){return matchCondition(cbcondition,input,0,value,delimiter)}match=input.match(eval(value));break;case"!regexp":case 11:if(value===""){return matchCondition(cbcondition,input,1,value,delimiter)}match=!input.match(eval(value));break;case"in":case 12:if(delimiter){match=value.split(delimiter).indexOf(input)!=-1}else{if(value===""){return matchCondition(cbcondition,input,0,value,delimiter)}match=value.indexOf(input)!=-1}break;case"!in":case 13:if(delimiter){match=value.split(delimiter).indexOf(input)==-1}else{if(value===""){return matchCondition(cbcondition,input,1,value,delimiter)}match=value.indexOf(input)==-1}break;case"=":case 0:default:match=input==value;break}cbcondition.element.triggerHandler("cbcondition.match",[cbcondition,input,operator,value,match]);return match}$.fn.cbcondition=function(e){var i=this;if(!$(this).length){return $(window).cbcondition(e)}if(methods[e]){return methods[e].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof e==="object"||!e){return methods.init.apply(this,arguments)}return this};$.fn.cbcondition.defaults={init:true,useData:true,target:null,conditions:[],show:[],hide:[],reset:true,debug:false}})(jQuery);